[{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"purpose-of-this-repository","dir":"","previous_headings":"","what":"Purpose of this repository","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"repository contains R package, vrcmort, fitting Bayesian hierarchical models estimate true mortality vital registration (VR) data observation process changes conflict. motivating pathology : Pre-conflict VR behaves like reasonable (imperfect) measurement deaths. spike trauma deaths (plausible), sharp drop non-trauma deaths (often implausible true mortality), age--death distribution becomes unnaturally young (especially missing older non-trauma deaths), strong regional variation reporting breakdown. fit standard hierarchical small-area model treats observed VR counts truth noise, model may incorrectly infer increasing conflict reduces non-trauma (indirect) mortality. artefact caused -registration selective reporting. vrcmort addresses explicitly modelling two linked layers: latent mortality process (deaths truly occurred), reporting process (fraction observed recorded VR, potentially age- cause-selective way). package aims : - simple use non-expert users (epidemia-like interface), - extensible advanced users (modular Stan ‚Äúlego bricks‚Äù custom Stan support), - testable reliable (simulation benchmarking, strong checks, CI).","code":""},{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"typical-raw-data","dir":"","previous_headings":"Data setting and practical workflow","what":"Typical raw data","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"region (admin unit), month death, age sex, ICD-10 code (sometimes missing), plus metadata (place death, facility, etc).","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"typical-aggregation-for-modelling","dir":"","previous_headings":"Data setting and practical workflow","what":"Typical aggregation for modelling","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"usually aggregate counts : - region r, - time t (monthly index), - age group , - sex s, - cause group g (minimum: trauma vs non-trauma). ICD-10 codes can mapped cause groups (example trauma vs non-trauma). model built start two groups later extend.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"population-denominators-and-displacement","dir":"","previous_headings":"Data setting and practical workflow","what":"Population denominators and displacement","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"assume user can provide: - region-month population demography, - approximate displacement/migration flows month update denominators. model uses exposure term, typically: - exposure = pop monthly bins, - exposure = pop * days_in_month person-days, - exposure = pop * coverage_fraction partial time coverage credible.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"canonical-vr-long-format","dir":"","previous_headings":"","what":"Canonical VR long format","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"package operates canonical ‚ÄúVR long‚Äù table row one cell (r, t, , s, g). Required columns: - region: region identifier (character factor) - time: integer time index (1..T, usually months) - age: integer age group index (1..) factor can indexed - sex: sex label index (1..S) - cause: cause group label index (1..G; typically 1=trauma, 2=non-trauma) - y: observed VR death count (non-negative integer; may NA missing) - exposure: modelling denominator (positive numeric) Recommended columns: - pop: population estimate (optional exposure already supplied) - covariates region-time (repeated within region-time across age/sex/cause cells): - conflict: conflict intensity (standardised numeric) - facility: health system functioning proxy (standardised numeric) - additional domain covariates (WASH, food insecurity, outbreaks, etc) - optional data quality measures: - quality_score, icd_garbage_share, age_missing_share, etc","code":""},{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"indices","dir":"","previous_headings":"The statistical model","what":"Indices","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"r = 1..R regions t = 1..T time points (months) = 1..age groups s = 1..S sexes g = 1..G cause groups (baseline implementation focuses G=2)","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"observed-and-latent-variables","dir":"","previous_headings":"The statistical model","what":"Observed and latent variables","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"Observed VR counts: - Y_{r,t,,s,g} Exposure (denominator): - E_{r,t,,s} (stored exposure data; repeated across cause groups) Latent (true) mortality rate: - Œª_{r,t,,s,g} > 0 Reporting completeness probability: - œÅ_{r,t,,s,g} (0, 1) Expected observed count: - Œº_{r,t,,s,g} = E_{r,t,,s} * Œª_{r,t,,s,g} * œÅ_{r,t,,s,g} Likelihood: - baseline Negative Binomial (NB2) robustness: - Y ~ NegBin2(Œº, œÜ_g) cause-specific dispersion œÜ_g implemented Stan.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"mortality-submodel-log-linear","dir":"","previous_headings":"The statistical model","what":"Mortality submodel (log-linear)","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"core log-linear structure : log Œª_{r,t,,s,g} = Œ±_{0,g} + Œ±_{age[],g} + Œ±_{sex[s],g} + u^{(Œª)}_{r,g} + v^{(Œª)}_{t,g}                     + Œ≤_{conf,g} * conflict_{r,t} + X^{mort}_{} Œ≤^{mort}_{g} + ... : - u^{(Œª)}_{r,g} region random intercept cause - v^{(Œª)}_{t,g} national time random walk (RW1) cause - Œ≤_{conf,g} (global) conflict effect true mortality cause - X^{mort} design matrix user-specified mortality covariates via formula input Optional partial pooling extensions supported package: - region-varying conflict slopes: - Œ≤_{conf,r,g} ~ Normal(Œ≤_{conf,g}, œÉ_{Œ≤conf,g}) - region-specific time deviations: - v^{(Œª,reg)}_{r,t,g} RW1 deviations around national trend","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"reporting-submodel-logit-linear","dir":"","previous_headings":"The statistical model","what":"Reporting submodel (logit-linear)","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"reporting model: logit œÅ_{r,t,,s,g} = Œ∫_{0,g} + Œ∫_{post,g} * post_t + u^{(œÅ)}_{r,g} + v^{(œÅ)}_{t,g}                        + Œ≥_{conf,g} * conflict_{r,t} + X^{rep}_{} Œ≥^{rep}_{g} + age_penalty(,t,g) + ... : - post_t indicates post-conflict period (t >= t0) - Œ∫_{0,g} baseline completeness (anchorable informative priors) - Œ∫_{post,g} post-conflict shift reporting - u^{(œÅ)}_{r,g} v^{(œÅ)}_{t,g} region time effects reporting - Œ≥_{conf,g} allows conflict reduce reporting completeness (often negative non-trauma) - X^{rep} design matrix user-specified reporting covariates","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"age-selective-reporting-collapse-non-trauma","dir":"","previous_headings":"The statistical model > Reporting submodel (logit-linear)","what":"Age-selective reporting collapse (non-trauma)","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"key mechanism motivating pathology post-conflict age penalty applied mainly non-trauma: age_penalty(,t,non) = - Œ¥_a * post_t Œ¥_a constrained monotone non-decreasing age. Implementation detail: - Œ¥_1 = 0 youngest group - increments Œî_a >= 0 = 2..- Œ¥_a = scale * cumulative_sum(Œî) allow smooth monotone penalty structure captures empirical feature older non-trauma deaths disproportionately missing conflict begins.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"misclassification-future-extension","dir":"","previous_headings":"The statistical model","what":"Misclassification (future extension)","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"simulator supports misclassification trauma non-trauma among recorded deaths, via 2x2 matrix M. base Stan model may always include explicit misclassification. planned extension: - E[Y_obs,g'] = Œ£_g Œº_true,g * M_{g -> g'}","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"identifiability-and-why-priors-matter","dir":"","previous_headings":"","what":"Identifiability and why priors matter","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"VR counts, Œª œÅ partially confounded Œº = exposure * Œª * œÅ. Therefore must anchor model using: Pre-conflict stability Priors keep pre-conflict reporting completeness plausible wildly varying. Age patterns age distribution deaths provides strong information whether changes due reporting vs real mortality. Monotone age penalties prevent model making arbitrary, non-identifiable age-specific reporting patterns. Covariate separation Put epidemiological drivers (food insecurity, WASH, outbreaks) mainly mortality. Put system functioning / access proxies (facility coverage, data quality indicators) mainly reporting. Conflict may appear , regularised avoid ‚Äúeffect swapping‚Äù.","code":""},{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"core-user-facing-functions","dir":"","previous_headings":"The R package interface","what":"Core user-facing functions","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"mortality reporting parameters, misclassification (simulator), additional missingness patterns: block, age-selective, MNAR, combined. vrc_validate_data() checks VR long format integrity. vrc_diagnose_reporting() provides quick plots detect reporting artefacts. vrc_fit() fits base model (extensions) via rstan. vrcm() provides epidemia-like wrapper takes mortality reporting components.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"model-extension-controls-package-level","dir":"","previous_headings":"The R package interface","what":"Model extension controls (package-level)","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"package supports toggles via user interface: - random slopes conflict region (mortality /reporting) - region-specific time RW deviations (mortality /reporting) Users can explore covariates pooling alter inference without editing Stan.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"custom-stan-workflow","dir":"","previous_headings":"The R package interface","what":"Custom Stan workflow","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"Advanced users can: - copy modular Stan model local directory, - edit specific include file (example reporting linear predictor), - fit via vrc_fit(stan_model = \"path//model.stan\"), - keep using package standata builders posterior extractors via model_spec.","code":""},{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"stan-modular-layout","dir":"","previous_headings":"Software architecture","what":"Stan modular layout","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"Stan code split include files, roughly mirroring epidemia: - functions - data - parameters - transformed parameters - priors likelihood - generated quantities (including log_lik) base model .stan mostly includes pieces.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"outputs","dir":"","previous_headings":"Software architecture","what":"Outputs","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"Generated quantities include: - lambda_rep, rho_rep, mu_rep, y_rep, log_lik used : - posterior summaries - PPCs - LOO/WAIC (via loo)","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"quality-assurance-requirements","dir":"","previous_headings":"","what":"Quality assurance requirements","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"Stan errors data-initialisation issues can subtle, package must catch failures early. Minimum QA expectations: 1) R CMD check ---cran passes cleanly. 2) Vignettes render without failure. 3) Stan syntax include resolution tested (via vignettes). 4) Data initialisation dimension mismatches tested: - especially edge cases like K_mort=1, K_rep=1. 5) least one lightweight end--end sampling test exists: - tiny simulated data - small iterations - skipped CRAN run CI. Recommended CI: - GitHub Actions workflow runs: - devtools::check(build_vignettes = TRUE) - minimal Stan parse/compile test - unit tests","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"near-term-roadmap-what-done-looks-like","dir":"","previous_headings":"","what":"Near-term roadmap (what ‚Äúdone‚Äù looks like)","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"Robust build check Clean docs, imports, NAMESPACE. Tests cover Stan parse/compile standata shape edge cases. Vignettes pass. User experience parity epidemia Simple model specification. Clear, slow, mathematical documentation. ‚Äúright thing default‚Äù priors diagnostics. Core extensions Misclassification Stan (simulator). Optional ill-defined cause group. Optional population uncertainty (latent multiplier exposure). Optional spatial structure (CAR/BYM2) needed.","code":""},{"path":"https://github.com/OJWatson/vrcmort/PROJECT_OVERVIEW.html","id":"key-modelling-takeaways-why-this-package-exists","dir":"","previous_headings":"","what":"Key modelling takeaways (why this package exists)","title":"vrcmort: conflict mortality estimation with explicit VR reporting collapse","text":"central challenge missing region-time cells, observation mechanism changes conflict. modelling reporting explicitly, package prevents common sign-flip artefacts indirect mortality. Simulation strong tests essential. recover truth simulated data known reporting collapse, trust real-world inference.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/fast-fitting.html","id":"simulate-a-tiny-example","dir":"Articles","previous_headings":"","what":"Simulate a tiny example","title":"Fast Fitting Strategies","text":"use small dataset still large enough speed differences model options visible: 5 regions 40 time points conflict begins time 21 (20 pre, 20 post) 8 age groups","code":"library(vrcmort)  sim_fast <- vrc_simulate(   R = R_sim,   T = T_sim,   t0 = t0_sim,   age_breaks = age_breaks_sim,   seed = 123,   missing = list(type = \"none\"),   rho0_true = c(0.99, 0.99) )  df <- sim_fast$df_obs  head(df) # Standata dimensions for reference sd <- vrc_fit(   data = df,   t0 = sim_fast$meta$t0,   chains = 0 )  sd$meta c(N = sd$standata$N, R = sd$standata$R, T = sd$standata$T, A = sd$standata$A, S = sd$standata$S, G = sd$standata$G)"},{"path":"https://github.com/OJWatson/vrcmort/articles/fast-fitting.html","id":"switches-we-will-benchmark","dir":"Articles","previous_headings":"","what":"Switches we will benchmark","title":"Fast Fitting Strategies","text":"benchmark four expensive/optional components: : region-specific time random-walk deviations (time = \"region\" vs \"national\") B: region-varying conflict slopes (conflict = \"region\" vs \"fixed\") C: pre-conflict reporting estimated vs fixed 1 (pre_conflict_reporting = \"estimate\" vs \"fixed1\") D: generated quantities enabled vs disabled (generated_quantities = \"full\" vs \"none\") options switchable via high-level interface.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/fast-fitting.html","id":"benchmark-six-runs","dir":"Articles","previous_headings":"","what":"Benchmark: six runs","title":"Fast Fitting Strategies","text":"run exactly six fits: full model (+B+C+D enabled) quickest model (+B+C+D disabled) full model minus one component: -, -B, -C, -D","code":"invisible(vrc_model(\"vr_reporting_model\")) invisible(vrc_model(\"vr_reporting_model_rho1_pre\")) invisible(vrc_model(\"vr_reporting_model_nogq\")) invisible(vrc_model(\"vr_reporting_model_rho1_pre_nogq\"))  iter_bench <- if (FAST_DEBUG) 40 else 100  run_one <- function(label,                     mort,                     rep,                     pre_conflict_reporting,                     generated_quantities,                     iter = iter_bench,                     chains = 1,                     seed = 123) {   cat(\"\\n\\n---\\n\")   cat(label, \"\\n\")   fit <- vrcm(     mortality = mort,     reporting = rep,     data = df,     t0 = sim_fast$meta$t0,     pre_conflict_reporting = pre_conflict_reporting,     generated_quantities = generated_quantities,     chains = chains,     iter = iter,     seed = seed,     refresh = 0   )    et <- rstan::get_elapsed_time(fit$stanfit)   et <- as.matrix(et)   warmup_seconds <- sum(et[, \"warmup\"])   sample_col <- if (\"sampling\" %in% colnames(et)) {     \"sampling\"   } else if (\"sample\" %in% colnames(et)) {     \"sample\"   } else {     stop(\"Unexpected column names from rstan::get_elapsed_time().\")   }   sampling_seconds <- sum(et[, sample_col])    sp <- rstan::get_sampler_params(fit$stanfit, inc_warmup = FALSE)[[1]]   sp <- as.matrix(sp)   if (!all(c(\"n_leapfrog__\", \"treedepth__\", \"divergent__\") %in% colnames(sp))) {     stop(\"Unexpected column names from rstan::get_sampler_params().\")   }   sum_leapfrog <- sum(sp[, \"n_leapfrog__\"])   mean_leapfrog <- mean(sp[, \"n_leapfrog__\"])   max_treedepth <- max(sp[, \"treedepth__\"])   divergences <- sum(sp[, \"divergent__\"])    print(fit)   gc()   data.frame(     model = label,     warmup_seconds = warmup_seconds,     sampling_seconds = sampling_seconds,     total_seconds = warmup_seconds + sampling_seconds,     mean_n_leapfrog = mean_leapfrog,     sum_n_leapfrog = sum_leapfrog,     seconds_per_leapfrog = if (sum_leapfrog > 0) sampling_seconds / sum_leapfrog else NA_real_,     max_treedepth = max_treedepth,     divergences = divergences,     row.names = NULL,     stringsAsFactors = FALSE   ) }  mort_full <- vrc_mortality(~ 1, conflict = \"region\", time = \"region\") rep_full  <- vrc_reporting(~ 1, conflict = \"region\", time = \"region\")  mort_fast <- vrc_mortality(~ 1, conflict = \"fixed\", time = \"national\") rep_fast  <- vrc_reporting(~ 1, conflict = \"fixed\", time = \"national\")  r_full <- run_one(   \"full (A+B+C+D)\",   mort = mort_full,   rep = rep_full,   pre_conflict_reporting = \"estimate\",   generated_quantities = \"full\" )  r_quick <- run_one(   \"quickest (-A-B-C-D)\",   mort = mort_fast,   rep = rep_fast,   pre_conflict_reporting = \"fixed1\",   generated_quantities = \"none\" )  r_minus_A <- run_one(   \"full - A (no region time deviations)\",   mort = vrc_mortality(~ 1, conflict = \"region\", time = \"national\"),   rep = vrc_reporting(~ 1, conflict = \"region\", time = \"national\"),   pre_conflict_reporting = \"estimate\",   generated_quantities = \"full\" )  r_minus_B <- run_one(   \"full - B (fixed conflict slopes)\",   mort = vrc_mortality(~ 1, conflict = \"fixed\", time = \"region\"),   rep = vrc_reporting(~ 1, conflict = \"fixed\", time = \"region\"),   pre_conflict_reporting = \"estimate\",   generated_quantities = \"full\" )  r_minus_C <- run_one(   \"full - C (pre-conflict rho fixed to 1)\",   mort = mort_full,   rep = rep_full,   pre_conflict_reporting = \"fixed1\",   generated_quantities = \"full\" )  r_minus_D <- run_one(   \"full - D (no generated quantities)\",   mort = mort_full,   rep = rep_full,   pre_conflict_reporting = \"estimate\",   generated_quantities = \"none\" )  runtime <- rbind(r_full, r_quick, r_minus_A, r_minus_B, r_minus_C, r_minus_D) runtime$speedup_vs_full <- runtime$total_seconds[1] / runtime$total_seconds runtime"},{"path":"https://github.com/OJWatson/vrcmort/articles/missingness.html","id":"missingness-patterns-implemented-in-vrc_simulate","dir":"Articles","previous_headings":"","what":"Missingness patterns implemented in vrc_simulate","title":"Stress testing under different missingness mechanisms","text":"vrc_simulate() function supports several additional missingness patterns top explicit reporting model: Block dropout: missing region-time blocks (example, system outages) probability driven conflict intensity facility functioning. Age-selective dropout: preferential loss older non-trauma deaths conflict begins. MNAR overload: missing---random dropout driven true death burden. mechanisms designed mimic failure modes commonly seen VR facility-based data streams.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/missingness.html","id":"compare-scenarios","dir":"Articles","previous_headings":"","what":"Compare scenarios","title":"Stress testing under different missingness mechanisms","text":"","code":"library(vrcmort)  base <- vrc_simulate(R = 5, T = 48, t0 = 20, seed = 1, missing = list(type = \"none\")) block <- vrc_simulate(R = 5, T = 48, t0 = 20, seed = 1, missing = list(type = \"block\", block_intercept = -1.5)) age <- vrc_simulate(R = 5, T = 48, t0 = 20, seed = 1, missing = list(type = \"age_selective\", age_dropout_strength = 1.0, age_dropout_old_from = 6)) combo <- vrc_simulate(R = 5, T = 48, t0 = 20, seed = 1, missing = list(type = \"combined\", block_intercept = -2.0, age_dropout_strength = 1.0, mnar_strength = 1.0))  c(   base = mean(is.na(base$df_full$y)),   block = mean(is.na(block$df_full$y)),   age = mean(is.na(age$df_full$y)),   combo = mean(is.na(combo$df_full$y)) ) #>       base      block        age      combo  #> 0.00000000 0.28750000 0.01080729 0.21718750"},{"path":"https://github.com/OJWatson/vrcmort/articles/missingness.html","id":"fitting-and-evaluation","dir":"Articles","previous_headings":"","what":"Fitting and evaluation","title":"Stress testing under different missingness mechanisms","text":"typical stress-test workflow : simulate scenario, fit model, compare inferred reporting collapse latent mortality truth.","code":"fit <- vrc_fit(   data = combo$df_obs,   t0 = combo$meta$t0,   mortality_covariates = ~ facility,   reporting_covariates = ~ facility,   chains = 4,   iter = 1000,   seed = 1 )  plot_reporting(fit) plot_mortality(fit, value = \"true_deaths\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Model Description","text":"vrcmort implements hierarchical Bayesian model vital registration (VR) mortality counts settings reporting mechanism changes time. core idea distinguish: latent mortality process (deaths truly occur), reporting process (probability deaths recorded VR). separation essential conflict simultaneously increases mortality reduces completeness registration. Throughout vignette describe model generative way. code, model fit Stan.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"notation-and-indices","dir":"Articles","previous_headings":"","what":"Notation and indices","title":"Model Description","text":"index: region r‚àà{1,‚Ä¶,R}r \\\\{1, \\ldots, R\\} time (usually month) t‚àà{1,‚Ä¶,T}t \\\\{1, \\ldots, T\\} age group ‚àà{1,‚Ä¶,}\\\\{1, \\ldots, \\} sex s‚àà{1,‚Ä¶,S}s \\\\{1, \\ldots, S\\} cause group g‚àà{1,‚Ä¶,G}g \\\\{1, \\ldots, G\\} many conflict applications start G=2G=2: g=1g=1: trauma / violence-related g=2g=2: non-trauma model written cell level (r,t,,s,g)(r,t,,s,g) R interface expects data aggregated long format.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"observed-data","dir":"Articles","previous_headings":"","what":"Observed data","title":"Model Description","text":"cell observe: Yr,t,,s,gY_{r,t,,s,g}: number deaths recorded VR Er,t,,sE_{r,t,,s}: exposure (person-time risk) also observe region-time covariates. Two central: xr,tx_{r,t}: conflict intensity proxy zr,tz_{r,t}: health system functioning proxy (example, facility availability) Additional covariates can added mortality submodel /reporting submodel.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"exposure","dir":"Articles","previous_headings":"Observed data","what":"Exposure","title":"Model Description","text":"Exposure whatever scale makes rates interpretable comparable across cells. work month-level counts every month fully covered, can use Er,t,,s=Nr,t,,sE_{r,t,,s} = N_{r,t,,s} (population). periods different lengths, VR operational part period, can use person-time, example Er,t,,s=Nr,t,,s√ódays_coveredE_{r,t,,s} = N_{r,t,,s} \\times \\text{days\\_covered}. vrcmort expected count proportional exposure.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"latent-mortality-process","dir":"Articles","previous_headings":"","what":"Latent mortality process","title":"Model Description","text":"Let Œªr,t,,s,g>0\\lambda_{r,t,,s,g} > 0 true death rate (per unit exposure) cell. simple generative story : Dr,t,,s,g‚à£Œªr,t,,s,g‚àºPoisson(Er,t,,s‚ãÖŒªr,t,,s,g), D_{r,t,,s,g} \\mid \\lambda_{r,t,,s,g} \\sim \\text{Poisson}\\big(E_{r,t,,s} \\cdot \\lambda_{r,t,,s,g}\\big), Dr,t,,s,gD_{r,t,,s,g} number true deaths. practice, VR counts often show variation Poisson model. vrcmort therefore uses negative binomial observation model (see ), can understood Poisson model extra -dispersion.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"log-linear-model-for-the-rate","dir":"Articles","previous_headings":"Latent mortality process","what":"Log-linear model for the rate","title":"Model Description","text":"model log rate structured additive predictor: logŒªr,t,,s,g=Œ±0,g+Œ±a,g(age)+Œ±s,g(sex)+ur,g(Œª)+vt,g(Œª)+Œ≤conf,gxr,t+ùê±r,t(mort)‚ä§ùõÉg(mort). \\log \\lambda_{r,t,,s,g} = \\alpha_{0,g} + \\alpha^{(age)}_{,g} + \\alpha^{(sex)}_{s,g} + u^{(\\lambda)}_{r,g} + v^{(\\lambda)}_{t,g} + \\beta_{conf,g} \\, x_{r,t} + \\mathbf{x}^{(mort)}_{r,t}{}^\\top \\boldsymbol{\\beta}^{(mort)}_{g}. Interpretation terms: Œ±0,g\\alpha_{0,g}: baseline log rate cause gg Œ±a,g(age)\\alpha^{(age)}_{,g}: age pattern cause gg Œ±s,g(sex)\\alpha^{(sex)}_{s,g}: sex effect cause gg ur,g(Œª)u^{(\\lambda)}_{r,g}: region random intercept (partial pooling) vt,g(Œª)v^{(\\lambda)}_{t,g}: national time random walk (smooth temporal variation) Œ≤conf,g\\beta_{conf,g}: effect conflict intensity true rate ùõÉg(mort)\\boldsymbol{\\beta}^{(mort)}_{g}: additional mortality covariate effects conflict effect default model constrained non-negative: Œ≤conf,g‚â•0. \\beta_{conf,g} \\ge 0. deliberate guardrail common artefact regression observed VR counts concludes conflict reduces mortality.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"reporting-process-registration-completeness","dir":"Articles","previous_headings":"","what":"Reporting process (registration completeness)","title":"Model Description","text":"Let œÅr,t,,s,g‚àà(0,1)\\rho_{r,t,,s,g} \\(0,1) probability true death cell recorded VR. natural generative step binomial thinning: Yr,t,,s,g*‚à£Dr,t,,s,g,œÅr,t,,s,g‚àºBinomial(Dr,t,,s,g,œÅr,t,,s,g), Y^\\ast_{r,t,,s,g} \\mid D_{r,t,,s,g}, \\rho_{r,t,,s,g} \\sim \\text{Binomial}\\big(D_{r,t,,s,g},\\, \\rho_{r,t,,s,g}\\big), Y*Y^\\ast number observed deaths causes perfectly classified. base model explicitly model misclassification; instead recommend starting robust cause groupings (example trauma vs non-trauma).","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"logistic-model-for-completeness","dir":"Articles","previous_headings":"Reporting process (registration completeness)","what":"Logistic model for completeness","title":"Model Description","text":"model logit completeness: logit(œÅr,t,,s,g)=Œ∫0,g+Œ∫post,g‚ãÖpostt+ur,g(œÅ)+vt,g(œÅ)+Œ≥conf,gxr,t+ùê±r,t(rep)‚ä§ùõÑg(rep)+agepen(,g,t). \\text{logit}(\\rho_{r,t,,s,g}) = \\kappa_{0,g} + \\kappa_{post,g} \\cdot \\text{post}_t + u^{(\\rho)}_{r,g} + v^{(\\rho)}_{t,g} + \\gamma_{conf,g} \\, x_{r,t} + \\mathbf{x}^{(rep)}_{r,t}{}^\\top \\boldsymbol{\\gamma}^{(rep)}_{g} + \\text{agepen}(,g,t). Key pieces: Œ∫0,g\\kappa_{0,g}: baseline completeness (pre-conflict) cause gg Œ∫post,g\\kappa_{post,g}: shift completeness conflict begins ur,g(œÅ)u^{(\\rho)}_{r,g}: region random intercept completeness vt,g(œÅ)v^{(\\rho)}_{t,g}: national time random walk completeness Œ≥conf,g\\gamma_{conf,g}: effect conflict completeness ùõÑg(rep)\\boldsymbol{\\gamma}^{(rep)}_{g}: additional reporting covariate effects indicator postt\\text{post}_t 0 conflict start time t0t_0 1 afterwards.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"age-selective-reporting-collapse","dir":"Articles","previous_headings":"Reporting process (registration completeness)","what":"Age-selective reporting collapse","title":"Model Description","text":"distinctive feature conflict VR data completeness can become age-selective: older deaths (especially non-trauma) drop system. vrcmort represents age penalty applied conflict starts, typically non-trauma causes: agepen(,g,t)=‚àíŒ¥a‚ãÖùüô[g=non-trauma]‚ãÖpostt, \\text{agepen}(,g,t) = - \\delta_a \\cdot \\mathbb{1}[g = \\text{non-trauma}] \\cdot \\text{post}_t, Œ¥a‚â•0\\delta_a \\ge 0 monotone non-decreasing function age group. Stan model implemented modelling positive increments age groups. result , conflict begins, model allows observed VR age distribution shift younger even underlying mortality age schedule remains broadly similar.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"observation-model-for-vr-counts","dir":"Articles","previous_headings":"","what":"Observation model for VR counts","title":"Model Description","text":"model used fitting negative binomial likelihood observed counts: Yr,t,,s,g‚àºNegBin2(Œºr,t,,s,g,œïg), Y_{r,t,,s,g} \\sim \\text{NegBin2}(\\mu_{r,t,,s,g},\\, \\phi_g), Œºr,t,,s,g=Er,t,,s‚ãÖŒªr,t,,s,g‚ãÖœÅr,t,,s,g. \\mu_{r,t,,s,g} = E_{r,t,,s} \\cdot \\lambda_{r,t,,s,g} \\cdot \\rho_{r,t,,s,g}. parameter œïg>0\\phi_g > 0 cause-specific dispersion parameter. single likelihood implicitly marginalises latent true deaths DD. can still interpret model generatively ‚Äútrue deaths occur‚Äù ‚Äúrecorded‚Äù.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"identifiability-and-anchoring","dir":"Articles","previous_headings":"","what":"Identifiability and anchoring","title":"Model Description","text":"likelihood alone, Œª\\lambda œÅ\\rho weakly identified appear product Œª‚ãÖœÅ\\lambda \\cdot \\rho. vrcmort uses several sources information separate : Pre-conflict behaviour: VR looks stable pre-conflict, reasonable place informative priors baseline completeness Œ∫0,g\\kappa_{0,g}. Age structure: age-selective collapse informative reporting rather mortality. Smoothness: random walk priors time effects discourage implausibly sharp swings latent mortality rate. Covariate separation: covariates believed reflect system functioning naturally placed reporting model mortality model. priors therefore afterthought; part makes inference possible.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-description.html","id":"extensions-supported-in-the-current-base-model","dir":"Articles","previous_headings":"","what":"Extensions supported in the current base model","title":"Model Description","text":"base Stan program shipped vrcmort includes optional structured extensions controlled R interface: Region-varying conflict effects: partial pooling conflict coefficient region. Region-specific time trends: region-specific random walks around national trend. extensions (misclassification cause groups, population uncertainty, additional observation streams) can added extending Stan components. vignette implementation explains Stan code modularised.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"overview","dir":"Articles","previous_headings":"","what":"Overview","title":"Model Implementation","text":"vignette explains vrcmort turns VR long table Stan model fit. package follows epidemia-like pattern: Validate index data integer indices (region, time, age, sex, cause). Construct design matrices user-provided formulas. Build Stan data list also contains prior hyperparameters. Fit model via Stan (HMC via rstan). goal users never need edit Stan, advanced users can still .","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"canonical-vr-long-format","dir":"Articles","previous_headings":"","what":"Canonical VR long format","title":"Model Implementation","text":"core fitting functions expect one row per cell. Columns : identifiers: region, time, age, sex, cause outcome: y (observed VR deaths) denominator: exposure (person-time risk) conflict covariate: conflict additional covariates referenced formulas can check recommended contract :","code":"vrc_canonical_columns()"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"building-vr-long-data-from-individual-records","dir":"Articles","previous_headings":"Canonical VR long format","what":"Building VR long data from individual records","title":"Model Implementation","text":"individual-level deaths region, month, age, sex, ICD-10 codes, typical workflow : classify ICD-10 small cause grouping (example trauma vs non-trauma), bin ages groups, aggregate counts (region, time, age, sex, cause), join population covariates, compute exposure. tutorial vignette Data preparation individual VR records contains worked template.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"validation-and-indexing","dir":"Articles","previous_headings":"","what":"Validation and indexing","title":"Model Implementation","text":"fitting, vrcmort can validate common pitfalls: duplicated cells, negative non-integer counts, missing exposure, likely ‚Äúmissing--zero‚Äù pipelines. package maps identifiers integer indices needed Stan: meta object stores levels dimensions, returned fitted objects.","code":"vrc_validate_data(vr_long) idx <- vrc_index(vr_long) str(idx$meta)"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"formulas-and-design-matrices","dir":"Articles","previous_headings":"","what":"Formulas and design matrices","title":"Model Implementation","text":"Stan model always includes conflict proxy mortality reporting submodels. User-supplied formulas specify additional covariates beyond conflict. example: Internally: vrc_standata() builds X_mort X_rep using model.matrix(). covariates (default) centred scaled. scaling information stored fitted object coefficients can reported original scale desired.","code":"mort <- vrc_mortality(~ facility + food_insecurity) rep  <- vrc_reporting(~ facility)"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"structured-options-partial-pooling-and-region-specific-trends","dir":"Articles","previous_headings":"Formulas and design matrices","what":"Structured options (partial pooling and region-specific trends)","title":"Model Implementation","text":"component constructors also control optional structured features: conflict = \"fixed\" \"region\" region-varying conflict effects, time = \"national\" \"region\" region-specific time random walk deviations. passed Stan boolean flags: use_beta_conf_re use_gamma_conf_re use_rw_region_lambda use_rw_region_rho","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"building-stan-data","dir":"Articles","previous_headings":"","what":"Building Stan data","title":"Model Implementation","text":"see passed Stan without fitting, set chains = 0: returns list contains: standata: full Stan data list, meta: dimensions factor levels, scaling: centring scaling applied covariates.","code":"standata_bundle <- vrcm(   mortality = mort,   reporting = rep,   data = vr_long,   t0 = conflict_start_month,   chains = 0 )  names(standata_bundle$standata)"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"priors-as-data","dir":"Articles","previous_headings":"","what":"Priors as data","title":"Model Implementation","text":"key design decision vrcmort priors provided Stan data. means can change priors without editing Stan files. prior vignette explains prior maps model parameters.","code":"pri <- vrc_priors(   beta_conf = normal(0.3, 0.2),   gamma_conf = normal(0, 0.5),   beta_mort = normal(0, 0.5, autoscale = TRUE),   gamma_rep = normal(0, 0.7, autoscale = TRUE) )  fit <- vrcm(   mortality = mort,   reporting = rep,   data = vr_long,   t0 = conflict_start_month,   priors = pri,   chains = 4,   iter = 1000 )  vrc_prior_summary(fit)"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"stan-model-layout","dir":"Articles","previous_headings":"","what":"Stan model layout","title":"Model Implementation","text":"Stan code inst/stan/ split modular include files (‚Äúlego bricks‚Äù): functions/: reusable helper functions (example RW1 construction) data/: data block, including prior hyperparameters parameters/: parameter declarations tparameters/: transformed parameters (linear predictors, expected mean) model/: priors likelihood generated_quantities/: posterior predictive draws, pointwise log-likelihood top-level model file vr_reporting_model.stan mostly consists #include statements. makes easier create alternative variants (example adding misclassification) keeping R interface.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"fitting-via-rstan","dir":"Articles","previous_headings":"","what":"Fitting via rstan","title":"Model Implementation","text":"Model fitting uses Hamiltonian Monte Carlo (HMC) implemented Stan. main user controls : chains, iter, seed adapt_delta, max_treedepth difficult geometry (common hierarchical models weak identifiability), increasing adapt_delta often helpful.","code":"fit <- vrcm(   mortality = mort,   reporting = rep,   data = vr_long,   t0 = conflict_start_month,   chains = 4,   iter = 2000,   adapt_delta = 0.95,   max_treedepth = 12 )"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-implementation.html","id":"outputs","dir":"Articles","previous_headings":"","what":"Outputs","title":"Model Implementation","text":"fitted model (vrcfit) stores: underlying rstan fit standata used meta indexing information Common post-processing helpers include: posterior_reporting() œÅ\\,\\rho posterior_mortality() Œª\\,\\lambda posterior_expected_counts() Œº\\mu plot_reporting() plot_mortality() model comparison, generated quantities include pointwise log_lik, can used loo package.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-introduction.html","id":"why-this-package-exists","dir":"Articles","previous_headings":"","what":"Why this package exists","title":"Model Introduction","text":"conflict-affected settings, vital registration (VR) can continue record deaths (example, trauma deaths reaching facilities) simultaneously becoming less complete types death (example, chronic disease deaths among older adults). fit standard regression model observed VR counts include conflict intensity covariate, easy get wrong sign: model may suggest conflict reduces non-trauma mortality. reality reporting mechanism changed. vrcmort addresses modelling two linked components: latent mortality process, governs deaths truly occur, observation (reporting) process, governs deaths make VR system. key idea conflict can increase true mortality reducing reporting completeness time.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-introduction.html","id":"what-data-do-you-need","dir":"Articles","previous_headings":"","what":"What data do you need?","title":"Model Introduction","text":"vrcmort expects death counts canonical long format one row per cell, typically region-month level. minimal row corresponds : region, time (example, month index) age, sex cause (example, trauma vs non-trauma) y: observed VR death count exposure: person-time risk (often population full month, population multiplied days covered) conflict: region-time conflict proxy (example, ACLED-derived intensity measure) Additional covariates (facility functioning, food insecurity, WASH indicators) can included either mortality reporting submodel.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-introduction.html","id":"quick-start-on-simulated-data","dir":"Articles","previous_headings":"","what":"Quick start on simulated data","title":"Model Introduction","text":"Simulation fast can used understand model behaviour fit real data. fitting, usually worth checking whether VR series shows obvious reporting artefacts.","code":"library(vrcmort)  sim <- vrc_simulate(   R = 5,   T = 60,   t0 = 25,   seed = 123,   missing = list(type = \"combined\", block_intercept = -2.0, mnar_strength = 1.0) )  head(sim$df_obs) #>   region time age sex cause y       pop  exposure   conflict  facility post #> 1      1    1   1   1     1 0  19037.35  19037.35 -0.8802503 1.4500246    0 #> 2      2    1   1   1     1 1  75537.84  75537.84 -0.9443772 0.9393424    0 #> 3      3    1   1   1     1 0  47099.90  47099.90 -0.8526131 1.4912206    0 #> 4      4    1   1   1     1 7 100728.09 100728.09 -0.8531753 1.2017992    0 #> 6      1    2   1   1     1 3  19119.24  19119.24 -0.8670101 1.0013656    0 #> 7      2    2   1   1     1 2  78269.04  78269.04 -0.9475183 0.9613115    0 #>   y_true_total missing_flag #> 1           13        FALSE #> 2           67        FALSE #> 3           33        FALSE #> 4           96        FALSE #> 6           21        FALSE #> 7           43        FALSE diag <- vrc_diagnose_reporting(sim$df_obs, t0 = sim$meta$t0) diag$tables$totals_time  diag$plots$by_cause"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-introduction.html","id":"fit-the-model","dir":"Articles","previous_headings":"","what":"Fit the model","title":"Model Introduction","text":"model fit Stan via rstan. epidemia-like interface, use vrcm() explicit mortality reporting components. can include additional covariates beyond conflict (always included core Stan model):","code":"# Basic model: no additional covariates beyond the built-in conflict proxy mort <- vrc_mortality(~ 1) rep  <- vrc_reporting(~ 1)  fit <- vrcm(   mortality = mort,   reporting = rep,   data = sim$df_obs,   t0 = sim$meta$t0,   chains = 4,   iter = 1000,   seed = 123 )  print(fit) mort2 <- vrc_mortality(~ facility + food_insecurity) rep2  <- vrc_reporting(~ facility)  fit2 <- vrcm(   mortality = mort2,   reporting = rep2,   data = sim$df_obs,   t0 = sim$meta$t0,   chains = 4,   iter = 1000,   seed = 123 )  vrc_coef_summary(fit2)"},{"path":"https://github.com/OJWatson/vrcmort/articles/model-introduction.html","id":"where-to-go-next","dir":"Articles","previous_headings":"","what":"Where to go next","title":"Model Introduction","text":"vignette quick orientation. next vignettes go step--step mathematics modelling decisions: Model Description: full probabilistic model, equations interpretation. Model Implementation: VR long data becomes Stan data, formulas map model matrices. Model Schematic: diagram latent mortality reporting processes. Partial Pooling: modelling region-varying conflict effects region-specific time trends. Priors: practical prior choices override vrc_priors(). -reporting Age Structure: age distribution helps identify reporting collapse. also tutorial vignettes showing prepare VR long data individual-level death records run common model comparison workflows.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-schematic.html","id":"schematic-overview","dir":"Articles","previous_headings":"","what":"Schematic overview","title":"Model Schematic","text":"figure summarises modelling assumptions vrcmort. Covariates (especially conflict intensity measures system functioning) can affect latent mortality rate reporting completeness. latent mortality rate generates true deaths given exposure (population person-time). reporting process governs fraction true deaths appear VR. observed VR counts modelled negative binomial likelihood around expected value.","code":""},{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/articles/model-schematic.html","id":"nodes","dir":"Articles","previous_headings":"How to read the diagram","what":"Nodes","title":"Model Schematic","text":"Exposure Er,t,,sE_{r,t,,s} person-time risk. Latent mortality rate Œªr,t,,s,g\\lambda_{r,t,,s,g} death rate per unit exposure. True deaths Dr,t,,s,gD_{r,t,,s,g} deaths truly occur. Reporting completeness œÅr,t,,s,g\\rho_{r,t,,s,g} probability true death recorded VR. Observed VR counts Yr,t,,s,gY_{r,t,,s,g} analyse.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-schematic.html","id":"edges","dir":"Articles","previous_headings":"How to read the diagram","what":"Edges","title":"Model Schematic","text":"arrow covariates Œª\\lambda represents mortality submodel, example positive effect conflict trauma mortality. arrow covariates œÅ\\rho represents reporting submodel, example conflict reducing completeness non-trauma registration. arrows exposure Œª\\lambda DD represent death-generating process. arrow œÅ\\rho YY represents -reporting.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-schematic.html","id":"key-equation","dir":"Articles","previous_headings":"How to read the diagram","what":"Key equation","title":"Model Schematic","text":"expected observed count product exposure, latent mortality, completeness: Œºr,t,,s,g=Er,t,,s‚ãÖŒªr,t,,s,g‚ãÖœÅr,t,,s,g. \\mu_{r,t,,s,g} = E_{r,t,,s} \\cdot \\lambda_{r,t,,s,g} \\cdot \\rho_{r,t,,s,g}. mathematical representation idea conflict can increase true mortality reducing observed VR counts.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/model-schematic.html","id":"where-does-age-selective-reporting-fit","dir":"Articles","previous_headings":"","what":"Where does age-selective reporting fit?","title":"Model Schematic","text":"base model includes age-selective reporting penalty applied conflict begins (usually non-trauma causes). diagram part reporting node œÅ\\rho. practical way think : observed VR age distribution suddenly shifts younger, plausible demographic explanation population side, model tend attribute lower completeness older ages. vignette -reporting Age Structure goes detail.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"why-partial-pooling-matters","dir":"Articles","previous_headings":"","what":"Why partial pooling matters","title":"Partial Pooling","text":"many conflict mortality applications small number regions (example five), data quality may vary sharply across . fully pooled model (one coefficient shared across regions) can rigid: forces conflict effect everywhere. fully separate model (fit region independently) can noisy: sparse regions can produce extreme estimates driven reporting artefacts. Partial pooling compromise: region gets effect, regions share information hierarchical prior. vrcmort uses partial pooling several places default (example region random intercepts), also allows partial pooling conflict effects.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"region-random-intercepts","dir":"Articles","previous_headings":"","what":"Region random intercepts","title":"Partial Pooling","text":"mortality reporting submodels include region-level random intercepts cause group. mortality: ur,g(Œª)‚àºùí©(0,œÉu,g(Œª)).  u^{(\\lambda)}_{r,g} \\sim \\mathcal{N}(0, \\sigma^{(\\lambda)}_{u,g}). reporting: ur,g(œÅ)‚àºùí©(0,œÉu,g(œÅ)).  u^{(\\rho)}_{r,g} \\sim \\mathcal{N}(0, \\sigma^{(\\rho)}_{u,g}). terms capture persistent differences regions (baseline death rates baseline completeness) explained covariates.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"partial-pooling-for-conflict-effects-random-slopes","dir":"Articles","previous_headings":"","what":"Partial pooling for conflict effects (random slopes)","title":"Partial Pooling","text":"core extension vrcmort allowing conflict effect vary region.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"mortality-side","dir":"Articles","previous_headings":"Partial pooling for conflict effects (random slopes)","what":"Mortality side","title":"Partial Pooling","text":"Instead single conflict effect Œ≤conf,g\\beta_{conf,g}, allow: Œ≤conf,r,g=Œ≤conf,g+br,g(Œ≤), \\beta_{conf,r,g} = \\beta_{conf,g} + b^{(\\beta)}_{r,g}, br,g(Œ≤)‚àºùí©(0,œÉŒ≤,g).  b^{(\\beta)}_{r,g} \\sim \\mathcal{N}(0, \\sigma_{\\beta,g}). lets conflict stronger association true mortality regions others, shrinking weakly informed regions back towards global mean. Stan program region-specific effects parameterised non-centred random effect better sampling.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"reporting-side","dir":"Articles","previous_headings":"Partial pooling for conflict effects (random slopes)","what":"Reporting side","title":"Partial Pooling","text":"Similarly, effect conflict reporting completeness can vary region: Œ≥conf,r,g=Œ≥conf,g+br,g(Œ≥),br,g(Œ≥)‚àºùí©(0,œÉŒ≥,g). \\gamma_{conf,r,g} = \\gamma_{conf,g} + b^{(\\gamma)}_{r,g}, \\quad b^{(\\gamma)}_{r,g} \\sim \\mathcal{N}(0, \\sigma_{\\gamma,g}). useful regions experience much sharper collapse registration conflict starts.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"region-specific-time-trends","dir":"Articles","previous_headings":"","what":"Region-specific time trends","title":"Partial Pooling","text":"base model includes national random walks time mortality reporting. many conflict settings, also want region-specific departures national trend. vrcmort supports adding region-specific random walk deviation around national time effect. Conceptually: vt,g(Œª)+vr,t,g(Œª,reg)  v^{(\\lambda)}_{t,g} + v^{(\\lambda,reg)}_{r,t,g} vt,g(œÅ)+vr,t,g(œÅ,reg).  v^{(\\rho)}_{t,g} + v^{(\\rho,reg)}_{r,t,g}. terms can absorb local shocks (example temporary outages spikes) without forcing regions move together.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"how-to-specify-pooling-in-vrcmort","dir":"Articles","previous_headings":"","what":"How to specify pooling in vrcmort","title":"Partial Pooling","text":"Pooling options controlled component specifications passed vrcm().","code":"library(vrcmort)  # Region-varying conflict effects and region-specific time trends mort_pp <- vrc_mortality(~ facility, conflict = \"region\", time = \"region\") rep_pp  <- vrc_reporting(~ facility, conflict = \"region\", time = \"region\")  fit_pp <- vrcm(   mortality = mort_pp,   reporting = rep_pp,   data = vr_long,   t0 = conflict_start_month,   chains = 4,   iter = 1000 )  # Extract region-specific conflict effects vrc_conflict_effects(fit_pp, component = \"mortality\") vrc_conflict_effects(fit_pp, component = \"reporting\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/partial-pooling.html","id":"practical-advice","dir":"Articles","previous_headings":"","what":"Practical advice","title":"Partial Pooling","text":"regions, partial pooling usually safer fitting separate models. reporting collapse clearly differs region, allowing region-varying conflict effects reporting model often important. Region-specific time trends can valuable, add parameters. sampling becomes difficult, start national trends add region-specific trends later.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"why-priors-are-central-in-this-model","dir":"Articles","previous_headings":"","what":"Why priors are central in this model","title":"Priors","text":"likelihood VR counts depends product latent mortality rate reporting completeness: Œº=E‚ãÖŒª‚ãÖœÅ. \\mu = E \\cdot \\lambda \\cdot \\rho. Without additional information, many combinations Œª\\lambda œÅ\\rho can produce Œº\\mu. means priors minor detail; part makes inference possible. vignette explains: priors exist base model, mean, change using [vrc_priors()].","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"the-prior-interface","dir":"Articles","previous_headings":"","what":"The prior interface","title":"Priors","text":"vrcmort uses simple prior specification system inspired rstanarm epidemia. create prior bundle vrc_priors() pass vrcm() vrc_fit(). can inspect resolved priors (autoscaling) :","code":"pri <- vrc_priors(   beta_conf = normal(0.3, 0.2),   beta_mort = normal(0, 0.5, autoscale = TRUE),   gamma_rep = normal(0, 0.7, autoscale = TRUE),   phi = exponential(1) )  fit <- vrcm(   mortality = vrc_mortality(~ facility),   reporting = vrc_reporting(~ facility),   data = vr_long,   t0 = conflict_start_month,   priors = pri,   chains = 4,   iter = 1000 ) vrc_prior_summary(fit)"},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"baseline-completeness-priors","dir":"Articles","previous_headings":"","what":"Baseline completeness priors","title":"Priors","text":"influential priors baseline completeness terms Œ∫0,g\\kappa_{0,g} logit scale. base model: logit(œÅr,t,,s,g)=Œ∫0,g+‚Ä¶ \\text{logit}(\\rho_{r,t,,s,g}) = \\kappa_{0,g} + \\ldots practical way think Œ∫0,g\\kappa_{0,g} sets typical completeness conflict starts. strong prior knowledge (example capture-recapture work, demographic methods, historical audits), use . vrcmort default priors intentionally different trauma non-trauma (G=2G=2): trauma completeness often lower (facility-based capture), non-trauma completeness can higher pre-conflict. change priors, provide vector logit scale:","code":"# Suppose you believe pre-conflict completeness is around: # trauma ~ 0.6, non-trauma ~ 0.9 pri <- vrc_priors(   kappa0 = normal(qlogis(c(0.6, 0.9)), c(0.6, 0.4)) )"},{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"mortality-conflict-effect-beta_conf","dir":"Articles","previous_headings":"Conflict effect priors","what":"Mortality conflict effect (beta_conf)","title":"Priors","text":"mortality submodel includes conflict effect Œ≤conf,g\\beta_{conf,g} log rate. base model constrains parameter non-negative: Œ≤conf,g‚â•0. \\beta_{conf,g} \\ge 0. encodes weak important assumption: conflict reduce true mortality. typical weakly informative prior half-normal (implemented normal() constrained parameter Stan):","code":"pri <- vrc_priors(   beta_conf = normal(0.2, 0.3) )"},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"reporting-conflict-effect-gamma_conf","dir":"Articles","previous_headings":"Conflict effect priors","what":"Reporting conflict effect (gamma_conf)","title":"Priors","text":"reporting submodel includes Œ≥conf,g\\gamma_{conf,g} logit completeness. can either positive negative. non-trauma, often negative (conflict reduces completeness). trauma, can closer zero even positive conflict-related trauma preferentially recorded.","code":"pri <- vrc_priors(   gamma_conf = normal(0, 0.5) )"},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"random-effect-scale-priors","dir":"Articles","previous_headings":"","what":"Random effect scale priors","title":"Priors","text":"Random effect standard deviations control much regions time periods allowed differ. Examples: œÉu,g(Œª)\\sigma^{(\\lambda)}_{u,g}: region variation mortality œÉu,g(œÅ)\\sigma^{(\\rho)}_{u,g}: region variation completeness œÉv,g(Œª)\\sigma^{(\\lambda)}_{v,g}: smoothness national time random walk default priors weakly regularising half-normals. can tighten find model -fitting noise.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"dispersion-priors","dir":"Articles","previous_headings":"","what":"Dispersion priors","title":"Priors","text":"observation model uses negative binomial dispersion parameter œïg\\phi_g per cause. vrcmort use exponential prior œïg\\phi_g: œïg‚àºExponential(rate). \\phi_g \\sim \\text{Exponential}(\\text{rate}). Smaller œï\\phi implies -dispersion. Larger œï\\phi approaches Poisson model.","code":"# More over-dispersion pri <- vrc_priors(phi = exponential(2))  # Less over-dispersion (more Poisson-like) pri <- vrc_priors(phi = exponential(0.5))"},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"age-selective-reporting-priors","dir":"Articles","previous_headings":"","what":"Age-selective reporting priors","title":"Priors","text":"age-selective reporting penalty implemented monotone sequence Œ¥a\\delta_a multiplied post applied non-trauma completeness. priors increments overall scale control strongly model allowed -weight older ages post-conflict. data clearly show older deaths disappearing VR, loosening priors can help model explain age shift reporting rather implausible mortality changes.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"prior-recipes","dir":"Articles","previous_headings":"","what":"Prior recipes","title":"Priors","text":"three common prior bundles starting points.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"conservative-completeness-collapse","dir":"Articles","previous_headings":"Prior recipes","what":"1. Conservative completeness collapse","title":"Priors","text":"Assume VR remains fairly complete post-conflict.","code":"pri <- vrc_priors(   kappa_post = normal(0, 0.3),   delta_age_scale = normal(0, 0.5) )"},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"strong-reporting-collapse-for-non-trauma","dir":"Articles","previous_headings":"Prior recipes","what":"2. Strong reporting collapse for non-trauma","title":"Priors","text":"Assume non-trauma completeness drops sharply conflict starts.","code":"pri <- vrc_priors(   kappa_post = normal(c(0, -1.5), c(0.5, 0.5)),   gamma_conf = normal(c(0, -0.5), c(0.5, 0.5)) )"},{"path":"https://github.com/OJWatson/vrcmort/articles/priors.html","id":"strong-prior-that-conflict-increases-trauma-mortality","dir":"Articles","previous_headings":"Prior recipes","what":"3. Strong prior that conflict increases trauma mortality","title":"Priors","text":"universally correct; goal make assumptions explicit test sensitivity.","code":"pri <- vrc_priors(   beta_conf = normal(c(0.6, 0.1), c(0.3, 0.2)) )"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"goal","dir":"Articles","previous_headings":"","what":"Goal","title":"Tutorial: exploring covariates and pooling","text":"tutorial shows pragmatic workflow : fitting simple base model, adding covariates either mortality reporting submodel, turning partial pooling conflict effects region, comparing fitted models. use simulated data illustration, code works region-month VR long table.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"simulate-a-data-set-optional","dir":"Articles","previous_headings":"","what":"Simulate a data set (optional)","title":"Tutorial: exploring covariates and pooling","text":"","code":"library(vrcmort)  sim <- vrc_simulate(R = 5, T = 48, t0 = 20, seed = 1) vr_long <- sim$df_obs  t0 <- sim$meta$t0"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"step-1-fit-a-base-model","dir":"Articles","previous_headings":"","what":"Step 1: fit a base model","title":"Tutorial: exploring covariates and pooling","text":"Start additional covariates beyond built-conflict proxy.","code":"fit0 <- vrcm(   mortality = vrc_mortality(~ 1),   reporting = vrc_reporting(~ 1),   data = vr_long,   t0 = t0,   chains = 4,   iter = 1000,   seed = 1 )  plot(fit0, type = \"reporting\") plot(fit0, type = \"mortality\", value = \"true_deaths\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"step-2-add-covariates","dir":"Articles","previous_headings":"","what":"Step 2: add covariates","title":"Tutorial: exploring covariates and pooling","text":"rule thumb : covariates affect true burden (example food insecurity) go mortality model, covariates affect recorded (example facility functioning) go reporting model.","code":"fit1 <- vrcm(   mortality = vrc_mortality(~ facility),   reporting = vrc_reporting(~ facility),   data = vr_long,   t0 = t0,   chains = 4,   iter = 1000,   seed = 1 )  vrc_coef_summary(fit1)"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"step-3-allow-region-varying-conflict-effects-partial-pooling","dir":"Articles","previous_headings":"","what":"Step 3: allow region-varying conflict effects (partial pooling)","title":"Tutorial: exploring covariates and pooling","text":"conflict affects regions differently, reporting collapses differently, allow conflict slope vary region.","code":"fit2 <- vrcm(   mortality = vrc_mortality(~ facility, conflict = \"region\"),   reporting = vrc_reporting(~ facility, conflict = \"region\"),   data = vr_long,   t0 = t0,   chains = 4,   iter = 1000,   seed = 1 )  # Region-specific conflict effects vrc_conflict_effects(fit2, component = \"mortality\") vrc_conflict_effects(fit2, component = \"reporting\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"step-4-add-region-specific-time-trends","dir":"Articles","previous_headings":"","what":"Step 4: add region-specific time trends","title":"Tutorial: exploring covariates and pooling","text":"regions local temporal shocks (outages, displacement waves, localised violence) can add region-specific random walk deviations around national trend.","code":"fit3 <- vrcm(   mortality = vrc_mortality(~ facility, conflict = \"region\", time = \"region\"),   reporting = vrc_reporting(~ facility, conflict = \"region\", time = \"region\"),   data = vr_long,   t0 = t0,   chains = 4,   iter = 1000,   seed = 1 )"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"step-5-compare-models","dir":"Articles","previous_headings":"","what":"Step 5: compare models","title":"Tutorial: exploring covariates and pooling","text":"three complementary ways compare models setting.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"substantive-plausibility","dir":"Articles","previous_headings":"Step 5: compare models","what":"1. Substantive plausibility","title":"Tutorial: exploring covariates and pooling","text":"Check whether fitted model produces sensible behaviour: trauma mortality increases conflict, non-trauma mortality implausibly decrease, inferred completeness drops post-conflict, especially older non-trauma deaths.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"posterior-predictive-checks","dir":"Articles","previous_headings":"Step 5: compare models","what":"2. Posterior predictive checks","title":"Tutorial: exploring covariates and pooling","text":"","code":"pp <- posterior_predict(fit2) # Compare distributions of y_rep to observed y"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"predictive-model-comparison-with-loo","dir":"Articles","previous_headings":"Step 5: compare models","what":"3. Predictive model comparison with LOO","title":"Tutorial: exploring covariates and pooling","text":"Stan model includes pointwise log_lik, can use loo want. LOO substitute scientific judgement, useful checking whether added complexity actually improving predictive fit.","code":"library(loo)  loglik0 <- rstan::extract(fit0$stanfit, pars = \"log_lik\")$log_lik loglik1 <- rstan::extract(fit1$stanfit, pars = \"log_lik\")$log_lik loglik2 <- rstan::extract(fit2$stanfit, pars = \"log_lik\")$log_lik  loo0 <- loo(loglik0) loo1 <- loo(loglik1) loo2 <- loo(loglik2)  loo_compare(loo0, loo1, loo2)"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-covariates-pooling.html","id":"suggested-workflow-for-real-analyses","dir":"Articles","previous_headings":"","what":"Suggested workflow for real analyses","title":"Tutorial: exploring covariates and pooling","text":"Fit base model. Add covariates believe essential. Turn partial pooling conflict effects see clear regional heterogeneity. Use simulation (missingness vignette) test whether model recovers truth plausible failure modes.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"goal","dir":"Articles","previous_headings":"","what":"Goal","title":"Tutorial: preparing VR long data from individual records","text":"tutorial shows practical template turning individual-level VR death records canonical VR long format expected vrcmort. assumed inputs : deaths_individual: one row per death region, month, age, sex, ICD-10 (possibly missing) pop: region-month-age-sex population (possibly applying displacement updates) covariates_rt: region-month covariates conflict intensity facility functioning output data frame one row per (region, time, age, sex, cause) cell.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-0-choose-age-groups-and-cause-groups","dir":"Articles","previous_headings":"","what":"Step 0: choose age groups and cause groups","title":"Tutorial: preparing VR long data from individual records","text":"vrcmort works best start small number robust cause groups. common starting point conflict settings : cause 1: trauma / violence-related cause 2: non-trauma age, start bins stable enough data. example: 0-4, 5-14, ‚Ä¶, 65+.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-1-classify-icd-10-into-trauma-vs-non-trauma","dir":"Articles","previous_headings":"","what":"Step 1: classify ICD-10 into trauma vs non-trauma","title":"Tutorial: preparing VR long data from individual records","text":"simple helper. almost certainly want customise coding practices. Notes: teams prefer narrower definition violence (example X85-Y09 plus Y35-Y36) treat accidents separately. large share missing ill-defined ICD codes, may want additional cause group (requires model extension).","code":"icd_to_cause <- function(icd10) {   icd10 <- toupper(trimws(icd10))   # Missing or empty code   if (is.na(icd10) || icd10 == \"\") return(NA_character_)    # Very rough trauma proxy: External causes (V-Y) in ICD-10   if (grepl(\"^[VWXY]\", icd10)) return(\"trauma\")    \"non_trauma\" }"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-2-bin-ages","dir":"Articles","previous_headings":"","what":"Step 2: bin ages","title":"Tutorial: preparing VR long data from individual records","text":"","code":"cut_age <- function(age_years) {   cut(     age_years,     breaks = c(-Inf, 4, 14, 24, 34, 44, 54, 64, Inf),     labels = c(\"0-4\",\"5-14\",\"15-24\",\"25-34\",\"35-44\",\"45-54\",\"55-64\",\"65+\"),     right = TRUE   ) }"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-3-aggregate-individual-deaths-into-vr-long-counts","dir":"Articles","previous_headings":"","what":"Step 3: aggregate individual deaths into VR long counts","title":"Tutorial: preparing VR long data from individual records","text":"stage observed counts y yet exposure covariates.","code":"library(dplyr)  vr_counts <- deaths_individual %>%   mutate(     time = month_id,  # or convert calendar month to an index     age = cut_age(age_years),     cause = vapply(icd10, icd_to_cause, character(1)),     sex = factor(sex, levels = c(\"F\",\"M\"))   ) %>%   filter(!is.na(cause), !is.na(age), !is.na(sex)) %>%   mutate(cause = if_else(cause == \"trauma\", \"trauma\", \"non_trauma\")) %>%   group_by(region, time, age, sex, cause) %>%   summarise(y = n(), .groups = \"drop\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-4-join-population-and-compute-exposure","dir":"Articles","previous_headings":"","what":"Step 4: join population and compute exposure","title":"Tutorial: preparing VR long data from individual records","text":"vrcmort expects exposure column. region-month data month fully covered populations month-specific, using exposure equal population fine. partial coverage month (example VR operational days), can incorporate :","code":"# pop should contain: region, time, age, sex, pop vr_long <- vr_counts %>%   left_join(pop, by = c(\"region\",\"time\",\"age\",\"sex\")) %>%   mutate(exposure = pop) # Suppose coverage_fraction is in [0,1] for each region-month vr_long <- vr_long %>%   left_join(covariates_rt %>% select(region, time, coverage_fraction), by = c(\"region\",\"time\")) %>%   mutate(exposure = pop * coverage_fraction)"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-5-join-region-month-covariates","dir":"Articles","previous_headings":"","what":"Step 5: join region-month covariates","title":"Tutorial: preparing VR long data from individual records","text":"minimum need conflict variable.","code":"# covariates_rt should contain: region, time, conflict, facility, etc vr_long <- vr_long %>%   left_join(covariates_rt, by = c(\"region\",\"time\"))"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-6-ensure-factor-levels-are-stable","dir":"Articles","previous_headings":"","what":"Step 6: ensure factor levels are stable","title":"Tutorial: preparing VR long data from individual records","text":"vrcmort converts identifiers indices. safest make region, age, sex, cause explicit factors stable levels.","code":"vr_long <- vr_long %>%   mutate(     region = factor(region),     age = factor(age, ordered = TRUE),     sex = factor(sex),     cause = factor(cause, levels = c(\"trauma\",\"non_trauma\"))   )"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-7-validate-and-diagnose","dir":"Articles","previous_headings":"","what":"Step 7: validate and diagnose","title":"Tutorial: preparing VR long data from individual records","text":"","code":"library(vrcmort)  vrc_validate_data(vr_long)  diag <- vrc_diagnose_reporting(vr_long, t0 = conflict_start_month) diag$plots$by_cause"},{"path":"https://github.com/OJWatson/vrcmort/articles/tutorial-data-prep.html","id":"step-8-fit-a-first-model","dir":"Articles","previous_headings":"","what":"Step 8: fit a first model","title":"Tutorial: preparing VR long data from individual records","text":"Start simple. explore covariates pooling using second tutorial vignette.","code":"fit <- vrcm(   mortality = vrc_mortality(~ 1),   reporting = vrc_reporting(~ 1),   data = vr_long,   t0 = conflict_start_month,   chains = 4,   iter = 1000 )  plot(fit, type = \"reporting\") plot(fit, type = \"mortality\", value = \"true_deaths\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"why-the-age-distribution-is-informative","dir":"Articles","previous_headings":"","what":"Why the age distribution is informative","title":"Under-reporting and Age Structure","text":"motivating setting vrcmort, observed VR data show sharp pattern conflict starts: trauma deaths increase (expected), non-trauma deaths decrease (implausibly), age distribution non-trauma deaths shifts younger. believe underlying non-trauma mortality burden among older adults collapsed overnight, strong evidence registration completeness become age-selective. vignette explains vrcmort uses age structure model -reporting.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"an-illustration","dir":"Articles","previous_headings":"","what":"An illustration","title":"Under-reporting and Age Structure","text":"plot stylised illustration pattern model designed capture.  Pre-conflict, observed deaths roughly track true deaths age groups. Post-conflict, observed deaths fall steeply older ages even true age profile remains similar.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"what-vrcmort-does-in-the-base-model","dir":"Articles","previous_headings":"","what":"What vrcmort does in the base model","title":"Under-reporting and Age Structure","text":"base model, reporting completeness modelled logit scale: logit(œÅr,t,,s,g)=Œ∫0,g+Œ∫post,g‚ãÖpostt+‚Ä¶+agepen(,g,t). \\text{logit}(\\rho_{r,t,,s,g}) = \\kappa_{0,g} + \\kappa_{post,g} \\cdot \\text{post}_t + \\ldots + \\text{agepen}(,g,t). age penalty designed : non-negative, monotone non-decreasing age, active conflict begins. conceptual form : agepen(,g,t)=‚àíŒ¥a‚ãÖùüô[g=non-trauma]‚ãÖpostt, \\text{agepen}(,g,t) = -\\delta_a \\cdot \\mathbb{1}[g=\\text{non-trauma}] \\cdot \\text{post}_t, Œ¥a‚â•0\\delta_a \\ge 0 Œ¥a\\delta_a increasing age group.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"why-monotone","dir":"Articles","previous_headings":"What vrcmort does in the base model","what":"Why monotone?","title":"Under-reporting and Age Structure","text":"Monotonicity encodes weak structural belief: system collapses way removes older deaths, unlikely remove age 65+ deaths still reliably recording age 45-54 deaths. also stabilises inference preventing model fitting highly wiggly age pattern completeness.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"how-the-monotone-penalty-is-implemented","dir":"Articles","previous_headings":"What vrcmort does in the base model","what":"How the monotone penalty is implemented","title":"Under-reporting and Age Structure","text":"Stan, monotonicity implemented via positive increments successive age groups: Œ¥1=0,Œ¥a+1=Œ¥a+Œîa,Œîa‚â•0. \\delta_1 = 0, \\quad \\delta_{+1} = \\delta_a + \\Delta_a, \\quad \\Delta_a \\ge 0. increments Œîa\\Delta_a priors control steep penalty can become.","code":""},{"path":[]},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"choose-age-groups-with-a-clear-interpretation","dir":"Articles","previous_headings":"Practical data preparation advice","what":"Choose age groups with a clear interpretation","title":"Under-reporting and Age Structure","text":"Use age groups reflect epidemiology data density. common starting point 5-year 10-year bins final open-ended group (example 65+). older ages sparse even pre-conflict, consider coarser bins older ages.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"avoid-changing-age-group-definitions-across-time","dir":"Articles","previous_headings":"Practical data preparation advice","what":"Avoid changing age group definitions across time","title":"Under-reporting and Age Structure","text":"redefine age groups time, model interpret changes age distribution change mortality completeness.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"keep-the-denominator-consistent","dir":"Articles","previous_headings":"Practical data preparation advice","what":"Keep the denominator consistent","title":"Under-reporting and Age Structure","text":"expected count depends exposure Œº=E‚ãÖŒª‚ãÖœÅ, \\mu = E \\cdot \\lambda \\cdot \\rho, large errors age-specific exposure can mimic reporting collapse. displacement flows, try apply age-sex population structure exposure reflects people actually risk region-month.","code":""},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"diagnosing-age-selective-under-reporting-in-data","dir":"Articles","previous_headings":"","what":"Diagnosing age-selective under-reporting in data","title":"Under-reporting and Age Structure","text":"vrc_diagnose_reporting() provides basic summaries, age-specific work often want focused plot. template (pseudo-code) plotting age distributions period cause. key pattern look post-conflict shift non-trauma deaths towards younger ages.","code":"library(dplyr) library(ggplot2)  vr_long %>%   mutate(period = if_else(time < t0, \"pre\", \"post\")) %>%   group_by(period, age, cause) %>%   summarise(y = sum(y, na.rm = TRUE), .groups = \"drop\") %>%   group_by(period, cause) %>%   mutate(frac = y / sum(y)) %>%   ggplot(aes(x = age, y = frac, group = period)) +   geom_line() +   facet_wrap(~ cause) +   labs(y = \"Share of recorded deaths\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"inspecting-inferred-completeness-by-age","dir":"Articles","previous_headings":"","what":"Inspecting inferred completeness by age","title":"Under-reporting and Age Structure","text":"fitting, can extract inferred completeness surface aggregate age. model behaving intended, see larger post-conflict drop inferred completeness older ages non-trauma cause group.","code":"fit <- vrcm(   mortality = vrc_mortality(~ 1),   reporting = vrc_reporting(~ 1),   data = vr_long,   t0 = t0,   chains = 4,   iter = 1000 )  rho <- posterior_reporting(fit)  # Summarise completeness by age and period rho %>%   mutate(period = if_else(time < t0, \"pre\", \"post\")) %>%   group_by(period, cause, age) %>%   summarise(rho_mean = mean(rho_mean), .groups = \"drop\")"},{"path":"https://github.com/OJWatson/vrcmort/articles/underreporting-age.html","id":"limitations-and-extensions","dir":"Articles","previous_headings":"","what":"Limitations and extensions","title":"Under-reporting and Age Structure","text":"Age structure informative, magic. conflict truly changes age distribution non-trauma deaths (example older adults leave region, access care changes differentially age), need population covariates reflect . systematic misclassification (example non-trauma deaths coded trauma, ill-defined), misclassification extension may needed. current base model designed starting point can stress test extend.","code":""},{"path":"https://github.com/OJWatson/vrcmort/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"OJ Watson. Author, maintainer.","code":""},{"path":"https://github.com/OJWatson/vrcmort/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"TODO TODO (2026). vrcmort: Hierarchical Bayesian Models Vital Registration Mortality Reporting Processes. R package version 0.0.1","code":"@Manual{,   title = {vrcmort: Hierarchical Bayesian Models for Vital Registration Mortality with Reporting Processes},   author = {TODO TODO},   year = {2026},   note = {R package version 0.0.1}, }"},{"path":"https://github.com/OJWatson/vrcmort/index.html","id":"where-to-start","dir":"","previous_headings":"","what":"Where to start","title":"Hierarchical Bayesian Models for Vital Registration Mortality with Reporting Processes","text":"Read Model Introduction quickest orientation. move Model Description mathematics. Use tutorials prepare VR long data individual records run common modelling workflows.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/exponential.html","id":null,"dir":"Reference","previous_headings":"","what":"Exponential prior ‚Äî exponential","title":"Exponential prior ‚Äî exponential","text":"Exponential prior","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/exponential.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Exponential prior ‚Äî exponential","text":"","code":"exponential(rate = 1)"},{"path":"https://github.com/OJWatson/vrcmort/reference/exponential.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Exponential prior ‚Äî exponential","text":"rate Rate parameter (> 0).","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/exponential.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Exponential prior ‚Äî exponential","text":"prior specification list.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/normal.html","id":null,"dir":"Reference","previous_headings":"","what":"Normal prior ‚Äî normal","title":"Normal prior ‚Äî normal","text":"Normal prior","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/normal.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Normal prior ‚Äî normal","text":"","code":"normal(location = 0, scale = 1, autoscale = FALSE)"},{"path":"https://github.com/OJWatson/vrcmort/reference/normal.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Normal prior ‚Äî normal","text":"location Prior mean. scale Prior standard deviation (> 0). autoscale Logical. TRUE, scale adjusted column scale design matrix (similar rstanarm/epidemia). default standardise = TRUE, autoscaling practical effect continuous predictors.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/normal.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Normal prior ‚Äî normal","text":"prior specification list.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_mortality.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot estimated mortality over time ‚Äî plot_mortality","title":"Plot estimated mortality over time ‚Äî plot_mortality","text":"Convenience plotting helper visualising estimated latent mortality. default plots expected true deaths (population x lambda), aggregated age sex.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_mortality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot estimated mortality over time ‚Äî plot_mortality","text":"","code":"plot_mortality(   x,   group_vars = c(\"region\", \"cause\"),   value = c(\"true_deaths\", \"rate\"),   ... )"},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_mortality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot estimated mortality over time ‚Äî plot_mortality","text":"x vrcfit object. group_vars Character vector columns group addition time. Defaults c(\"region\", \"cause\"). value One \"rate\" \"true_deaths\". ... Additional arguments passed ggplot2::theme().","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_mortality.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot estimated mortality over time ‚Äî plot_mortality","text":"ggplot object.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_reporting.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot estimated reporting completeness over time ‚Äî plot_reporting","title":"Plot estimated reporting completeness over time ‚Äî plot_reporting","text":"Convenience plotting helper visualising estimated reporting completeness time, aggregated age sex.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_reporting.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot estimated reporting completeness over time ‚Äî plot_reporting","text":"","code":"plot_reporting(   x,   group_vars = c(\"region\", \"cause\"),   weight_var = \"exposure\",   probs = c(0.1, 0.9),   ribbon = TRUE,   ... )"},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_reporting.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot estimated reporting completeness over time ‚Äî plot_reporting","text":"x vrcfit object. group_vars Character vector columns group addition time. Defaults c(\"region\", \"cause\"). weight_var Column name used weights aggregating completeness across age/sex. Defaults \"exposure\". probs Quantiles plot (must match computed posterior_reporting()). ribbon Logical. TRUE, draws ribbon lowest highest prob quantiles. ... Additional args passed ggplot2::theme().","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/plot_reporting.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot estimated reporting completeness over time ‚Äî plot_reporting","text":"ggplot object.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_expected_counts.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior summaries for expected observed counts ‚Äî posterior_expected_counts","title":"Posterior summaries for expected observed counts ‚Äî posterior_expected_counts","text":"Extract posterior draws/summaries expected observed counts mu returned Stan generated quantity (mu_rep).","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_expected_counts.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior summaries for expected observed counts ‚Äî posterior_expected_counts","text":"","code":"posterior_expected_counts(x, draws = FALSE, probs = c(0.1, 0.5, 0.9), ...)"},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_expected_counts.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior summaries for expected observed counts ‚Äî posterior_expected_counts","text":"x vrcfit object. draws Logical. TRUE, returns matrix posterior draws one column per observed cell. probs Numeric vector quantiles compute. ... Reserved future use.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_mortality.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior summaries for latent mortality rates ‚Äî posterior_mortality","title":"Posterior summaries for latent mortality rates ‚Äî posterior_mortality","text":"Extract posterior draws/summaries cell-level latent mortality rates lambda returned Stan generated quantity (lambda_rep).","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_mortality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior summaries for latent mortality rates ‚Äî posterior_mortality","text":"","code":"posterior_mortality(x, draws = FALSE, probs = c(0.1, 0.5, 0.9), ...)"},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_mortality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior summaries for latent mortality rates ‚Äî posterior_mortality","text":"x vrcfit object. draws Logical. TRUE, returns matrix posterior draws one column per observed cell. probs Numeric vector quantiles compute. ... Reserved future use.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_predict.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior predictive distribution for observed counts ‚Äî posterior_predict","title":"Posterior predictive distribution for observed counts ‚Äî posterior_predict","text":"Extract posterior predictive draws y_rep Stan generated quantities.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_predict.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior predictive distribution for observed counts ‚Äî posterior_predict","text":"","code":"posterior_predict(x, draws = FALSE, probs = c(0.1, 0.5, 0.9), ...)"},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_predict.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior predictive distribution for observed counts ‚Äî posterior_predict","text":"x vrcfit object. draws Logical. TRUE, returns matrix posterior draws one column per observed cell. probs Numeric vector quantiles compute. ... Reserved future use.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_reporting.html","id":null,"dir":"Reference","previous_headings":"","what":"Posterior summaries for reporting completeness ‚Äî posterior_reporting","title":"Posterior summaries for reporting completeness ‚Äî posterior_reporting","text":"Extract posterior draws (summaries) cell-level reporting completeness rho returned Stan generated quantity (rho_rep).","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_reporting.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Posterior summaries for reporting completeness ‚Äî posterior_reporting","text":"","code":"posterior_reporting(x, draws = FALSE, probs = c(0.1, 0.5, 0.9), ...)"},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_reporting.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Posterior summaries for reporting completeness ‚Äî posterior_reporting","text":"x vrcfit object. draws Logical. TRUE, returns matrix posterior draws one column per observed cell. probs Numeric vector quantiles compute. ... Reserved future use.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/posterior_reporting.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Posterior summaries for reporting completeness ‚Äî posterior_reporting","text":"draws = TRUE, matrix dimensions n_draws x N. Otherwise data.frame combining x$data summary columns rho.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_canonical_columns.html","id":null,"dir":"Reference","previous_headings":"","what":"Canonical VR long format ‚Äî vrc_canonical_columns","title":"Canonical VR long format ‚Äî vrc_canonical_columns","text":"vrcmort works canonical \"VR long\" data layout: one row per cell defined region, time, age group, sex, cause. package separates two concepts: exposure: person-time risk cell (example, population * days_in_period, population * coverage_fraction). count: observed VR death count cell. many settings, time bins regular (example, monthly) exposure can set population estimate. time bins irregular partially covered, exposure reflect . minimal required columns : region, time, age, sex, cause: identifiers y: observed VR counts (non-negative integer; NA allowed) exposure: person-time risk (positive numeric). exposure present, vrcmort use pop available. conflict: conflict intensity proxy (numeric) Optional commonly useful columns : pop: population size (different exposure) quality_flag: label known low-quality observations (example, \"system_down\", \"age_missing_high\"). quality_score: numeric score 0-1 capturing data quality. weight: optional weight used aggregation composition models.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_canonical_columns.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Canonical VR long format ‚Äî vrc_canonical_columns","text":"","code":"vrc_canonical_columns()"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_canonical_columns.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Canonical VR long format ‚Äî vrc_canonical_columns","text":"character vector recommended canonical column names.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_coef_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise covariate effects ‚Äî vrc_coef_summary","title":"Summarise covariate effects ‚Äî vrc_coef_summary","text":"Convenience helper extract summarise covariate effects fitted model, including cause-specific conflict effects additional covariate effects supplied via formulas. default returns effects standardised covariate scale used fitting. original_scale = TRUE, coefficients rescaled back original covariate scale using centring/scaling information stored fit$scaling.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_coef_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise covariate effects ‚Äî vrc_coef_summary","text":"","code":"vrc_coef_summary(x, probs = c(0.1, 0.5, 0.9), original_scale = FALSE)"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_coef_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise covariate effects ‚Äî vrc_coef_summary","text":"x vrcfit object. probs Quantiles include. original_scale Logical. TRUE, rescale coefficients back original covariate scale.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_coef_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise covariate effects ‚Äî vrc_coef_summary","text":"data.frame.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_conflict_effects.html","id":null,"dir":"Reference","previous_headings":"","what":"Region-specific conflict effects ‚Äî vrc_conflict_effects","title":"Region-specific conflict effects ‚Äî vrc_conflict_effects","text":"Extract posterior summaries conflict effect region. useful fit model partial pooling conflict effects (random slopes region), setting conflict = \"region\" vrc_mortality() /vrc_reporting(). underlying Stan model always defines region-specific conflict effects (beta_conf_rg mortality gamma_conf_rg reporting). corresponding feature disabled (conflict = \"fixed\"), region-specific effects equal global effect regions.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_conflict_effects.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Region-specific conflict effects ‚Äî vrc_conflict_effects","text":"","code":"vrc_conflict_effects(   x,   component = c(\"mortality\", \"reporting\"),   probs = c(0.1, 0.5, 0.9),   draws = FALSE )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_conflict_effects.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Region-specific conflict effects ‚Äî vrc_conflict_effects","text":"x vrcfit object. component model component summarise: mortality (beta_conf_rg) reporting (gamma_conf_rg). probs Quantiles report. draws Logical. FALSE (default), returns posterior summaries. TRUE, returns long data.frame posterior draws.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_conflict_effects.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Region-specific conflict effects ‚Äî vrc_conflict_effects","text":"data.frame. draws = FALSE, columns include mean, sd requested quantiles. draws = TRUE, columns include draw value.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_default_param_map.html","id":null,"dir":"Reference","previous_headings":"","what":"Default mapping for core generated quantities ‚Äî vrc_default_param_map","title":"Default mapping for core generated quantities ‚Äî vrc_default_param_map","text":"Default mapping core generated quantities","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_default_param_map.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Default mapping for core generated quantities ‚Äî vrc_default_param_map","text":"","code":"vrc_default_param_map()"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_diagnose_reporting.html","id":null,"dir":"Reference","previous_headings":"","what":"Diagnose VR reporting artefacts ‚Äî vrc_diagnose_reporting","title":"Diagnose VR reporting artefacts ‚Äî vrc_diagnose_reporting","text":"Quick exploratory summaries plots assess whether VR reporting appears change time, particularly around conflict start. designed run model fitting.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_diagnose_reporting.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Diagnose VR reporting artefacts ‚Äî vrc_diagnose_reporting","text":"","code":"vrc_diagnose_reporting(   data,   t0 = NULL,   id_cols = c(\"region\", \"time\", \"age\", \"sex\", \"cause\"),   y_col = \"y\",   cause_labels = NULL,   aggregate_duplicates = TRUE )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_diagnose_reporting.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Diagnose VR reporting artefacts ‚Äî vrc_diagnose_reporting","text":"data VR long-format data.frame. t0 Conflict start time (optional). May index time value. id_cols Identifier columns. y_col Outcome column. cause_labels Optional named character vector mapping cause levels human-readable labels. aggregate_duplicates TRUE (default), aggregates duplicate cells summing y.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_diagnose_reporting.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Diagnose VR reporting artefacts ‚Äî vrc_diagnose_reporting","text":"list components tables plots.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_fit.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit the VR reporting model ‚Äî vrc_fit","title":"Fit the VR reporting model ‚Äî vrc_fit","text":"Fit hierarchical VR mortality model explicit reporting process. model implemented Stan fit using rstan.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_fit.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit the VR reporting model ‚Äî vrc_fit","text":"","code":"vrc_fit(   data,   t0,   mortality_covariates = NULL,   reporting_covariates = NULL,   mortality_conflict = c(\"fixed\", \"region\"),   reporting_conflict = c(\"fixed\", \"region\"),   mortality_time = c(\"national\", \"region\"),   reporting_time = c(\"national\", \"region\"),   standardise = TRUE,   scale_binary = FALSE,   drop_na_y = TRUE,   duplicates = c(\"error\", \"sum\"),   algorithm = c(\"sampling\", \"meanfield\", \"fullrank\"),   priors = NULL,   age_drop_cause = NULL,   prior_PD = FALSE,   backend = c(\"rstan\"),   stan_model = \"vr_reporting_model\",   ... )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_fit.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit the VR reporting model ‚Äî vrc_fit","text":"data data.frame long format (see vrc_standata()). t0 Conflict start time. See vrc_standata(). mortality_covariates Optional formula additional mortality covariates, excluding conflict. reporting_covariates Optional formula additional reporting covariates, excluding conflict. mortality_conflict model conflict effect mortality component. Use \"fixed\" (default) one effect shared across regions, \"region\" partial pooling (random slopes) region. reporting_conflict model conflict effect reporting component. Use \"fixed\" (default) one effect shared across regions, \"region\" partial pooling (random slopes) region. mortality_time model time variation mortality component. \"national\" uses single random walk shared across regions; \"region\" adds region-specific random walk deviations around national trend. reporting_time model time variation reporting component. \"national\" uses single random walk shared across regions; \"region\" adds region-specific random walk deviations around national trend. standardise Logical. TRUE (recommended), standardise conflict covariate columns model matrices. scale_binary Logical. TRUE, also standardise binary dummy columns. drop_na_y Logical. TRUE, rows missing y removed fitting. duplicates handle duplicate identifier rows. One \"error\" (default) \"sum\". algorithm One \"sampling\", \"meanfield\", \"fullrank\" (passed rstan). priors Optional prior specification created vrc_priors(). NULL (default), uses vrc_priors() package defaults. age_drop_cause cause age reporting breakdown occur . Defaults NULL uses 2nd cause first one. prior_PD Logical. TRUE, samples prior distribution (likelihood). backend Backend use. Currently \"rstan\" supported. stan_model Stan model name. Defaults \"vr_reporting_model\". ... Additional arguments passed rstan::sampling rstan::vb.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_fit.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit the VR reporting model ‚Äî vrc_fit","text":"object class vrcfit.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_index.html","id":null,"dir":"Reference","previous_headings":"","what":"Index a VR long-format dataset ‚Äî vrc_index","title":"Index a VR long-format dataset ‚Äî vrc_index","text":"Convert identifier columns integer indices (1..R, 1..T, ...) used Stan. also creates stable ordering time values optionally aggregates duplicate identifier rows.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_index.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Index a VR long-format dataset ‚Äî vrc_index","text":"","code":"vrc_index(   data,   t0 = NULL,   id_cols = c(\"region\", \"time\", \"age\", \"sex\", \"cause\"),   y_col = \"y\",   exposure_col = NULL,   conflict_col = \"conflict\",   duplicates = c(\"error\", \"sum\"),   sort_time = TRUE )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_index.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Index a VR long-format dataset ‚Äî vrc_index","text":"data data.frame. t0 Conflict start time. May integer index 1..T value present data$time. id_cols Identifier columns. See vrc_validate_data(). y_col Outcome column name. exposure_col Exposure column name. NULL, uses exposure present; otherwise uses pop. conflict_col Conflict column name. duplicates handle duplicates. One \"error\" (default) \"sum\". sort_time Logical. TRUE (default), time values sorted.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_index.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Index a VR long-format dataset ‚Äî vrc_index","text":"list components: data: processed data.frame (including *_id integer columns exposure column) meta: list levels dimension sizes","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model.html","id":null,"dir":"Reference","previous_headings":"","what":"Load and cache a Stan model ‚Äî vrc_model","title":"Load and cache a Stan model ‚Äî vrc_model","text":"Load cache Stan model","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Load and cache a Stan model ‚Äî vrc_model","text":"","code":"vrc_model(name = \"vr_reporting_model\", backend = c(\"rstan\"), ...)"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Load and cache a Stan model ‚Äî vrc_model","text":"name Stan model name (see vrc_model_names()) path .stan file, vrc_model_spec() object. backend Backend use. Currently \"rstan\" supported. ... Additional arguments passed backend model compiler.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Load and cache a Stan model ‚Äî vrc_model","text":"compiled Stan model object.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model_names.html","id":null,"dir":"Reference","previous_headings":"","what":"List Stan models shipped with the package ‚Äî vrc_model_names","title":"List Stan models shipped with the package ‚Äî vrc_model_names","text":"List Stan models shipped package","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model_names.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"List Stan models shipped with the package ‚Äî vrc_model_names","text":"","code":"vrc_model_names()"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model_names.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"List Stan models shipped with the package ‚Äî vrc_model_names","text":"Character vector model names.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model_spec.html","id":null,"dir":"Reference","previous_headings":"","what":"Define a model specification ‚Äî vrc_model_spec","title":"Define a model specification ‚Äî vrc_model_spec","text":"Create small model specification object can used fit either built-Stan model shipped vrcmort user-supplied Stan model file. keeps R-side data preparation posterior extraction tools working even users modify Stan code. param_map component named list mapping key quantities Stan variable names. default mapping matches generated quantities base model.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model_spec.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Define a model specification ‚Äî vrc_model_spec","text":"","code":"vrc_model_spec(   model = \"vr_reporting_model\",   stan_file = NULL,   backend = c(\"rstan\"),   param_map = NULL )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model_spec.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Define a model specification ‚Äî vrc_model_spec","text":"model Either name built-Stan model (see vrc_model_names()) path .stan file. stan_file Optional explicit path .stan file. supplied, overrides model. backend Backend use. Currently \"rstan\" supported. param_map Named list mapping rho, lambda, mu, y_rep, optionally log_lik Stan variable names.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_model_spec.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Define a model specification ‚Äî vrc_model_spec","text":"object class vrc_model_spec.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_mortality.html","id":null,"dir":"Reference","previous_headings":"","what":"Mortality model component specification ‚Äî vrc_mortality","title":"Mortality model component specification ‚Äî vrc_mortality","text":"Create mortality component specification vrcm(). light wrapper around formula describing additional mortality covariates (beyond always-included conflict proxy). formula include conflict; conflict included core Stan model beta_conf.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_mortality.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Mortality model component specification ‚Äî vrc_mortality","text":"","code":"vrc_mortality(   formula = ~1,   conflict = c(\"fixed\", \"region\"),   time = c(\"national\", \"region\") )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_mortality.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Mortality model component specification ‚Äî vrc_mortality","text":"formula model formula. default ~ 1 specifies additional covariates. conflict model conflict effect mortality component. Use \"fixed\" one effect shared across regions (per cause), \"region\" partial pooling (random slopes) region (per cause). time model time variation mortality component. \"national\" uses single random walk shared across regions (per cause). \"region\" adds region-specific random walk deviations around national trend.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_mortality.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Mortality model component specification ‚Äî vrc_mortality","text":"object class vrc_mortality.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_prior_summary.html","id":null,"dir":"Reference","previous_headings":"","what":"Summarise priors used by a fitted model ‚Äî vrc_prior_summary","title":"Summarise priors used by a fitted model ‚Äî vrc_prior_summary","text":"Summarise priors used fitted model","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_prior_summary.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Summarise priors used by a fitted model ‚Äî vrc_prior_summary","text":"","code":"vrc_prior_summary(x)"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_prior_summary.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Summarise priors used by a fitted model ‚Äî vrc_prior_summary","text":"x vrcfit object (recommended) resolved prior list returned internal vrc_resolve_priors().","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_prior_summary.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Summarise priors used by a fitted model ‚Äî vrc_prior_summary","text":"data.frame one row per prior hyperparameter group.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Prior specification constructors ‚Äî vrc_priors","title":"Prior specification constructors ‚Äî vrc_priors","text":"vrcmort uses lightweight prior specification system inspired rstanarm epidemia packages. Priors represented simple named lists converted Stan hyperparameters vrc_standata(). small set distributions currently supported shipped Stan model uses conjugate-friendly priors: normal(location, scale) exponential(rate) Create bundled set priors use vrcm() / vrc_fit(). returned object converted Stan hyperparameters vrc_standata(). defaults designed match hard-coded priors used earlier versions vrcmort.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_priors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Prior specification constructors ‚Äî vrc_priors","text":"","code":"vrc_priors(   beta_conf = normal(0.2, 0.3, autoscale = FALSE),   beta_mort = normal(0, 0.3, autoscale = TRUE),   gamma_conf = normal(0, 0.5, autoscale = FALSE),   gamma_rep = normal(0, 0.5, autoscale = TRUE),   kappa0 = NULL,   kappa_post = normal(0, 0.7, autoscale = FALSE),   alpha0 = normal(-9, 2, autoscale = FALSE),   alpha_age = normal(0, 1, autoscale = FALSE),   alpha_sex = normal(0, 0.5, autoscale = FALSE),   sigma_u_lambda = normal(0, 0.5, autoscale = FALSE),   sigma_v_lambda = normal(0, 0.2, autoscale = FALSE),   sigma_beta_conf = normal(0, 0.3, autoscale = FALSE),   sigma_v_lambda_region = normal(0, 0.2, autoscale = FALSE),   sigma_u_rho = normal(0, 0.5, autoscale = FALSE),   sigma_v_rho = normal(0, 0.2, autoscale = FALSE),   sigma_gamma_conf = normal(0, 0.5, autoscale = FALSE),   sigma_v_rho_region = normal(0, 0.2, autoscale = FALSE),   delta_age_incr = normal(0, 0.5, autoscale = FALSE),   delta_age_scale = normal(0, 1, autoscale = FALSE),   phi = exponential(1) )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_priors.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Prior specification constructors ‚Äî vrc_priors","text":"beta_conf Prior conflict effect mortality component. parameter constrained non-negative base model. beta_mort Prior additional mortality covariate effects. gamma_conf Prior conflict effect reporting component. gamma_rep Prior additional reporting covariate effects. kappa0 Optional prior baseline reporting logit scale. NULL (default), anchored prior used: cause 1 centred logit(0.70), cause 2 logit(0.90), remaining causes logit(0.85). kappa_post Prior post-conflict reporting shift. alpha0 Prior mortality intercept. alpha_age Prior scale age effects mortality component. alpha_sex Prior scale sex effects mortality component. sigma_u_lambda Prior scale region random effect scales (mortality). sigma_v_lambda Prior scale national time RW scales (mortality). sigma_beta_conf Prior scale region-varying conflict slope scales (mortality). sigma_v_lambda_region Prior scale region-specific time RW scales (mortality). sigma_u_rho Prior scale region random effect scales (reporting). sigma_v_rho Prior scale national time RW scales (reporting). sigma_gamma_conf Prior scale region-varying conflict slope scales (reporting). sigma_v_rho_region Prior scale region-specific time RW scales (reporting). delta_age_incr Prior scale increments monotone age penalty. delta_age_scale Prior scale overall monotone age penalty scale. phi Prior NB2 dispersion parameter.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_priors.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Prior specification constructors ‚Äî vrc_priors","text":"list class vrc_priors.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_reporting.html","id":null,"dir":"Reference","previous_headings":"","what":"Reporting model component specification ‚Äî vrc_reporting","title":"Reporting model component specification ‚Äî vrc_reporting","text":"Create reporting component specification vrcm(). light wrapper around formula describing additional reporting covariates (beyond always-included conflict proxy). formula include conflict; conflict included core Stan model gamma_conf.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_reporting.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reporting model component specification ‚Äî vrc_reporting","text":"","code":"vrc_reporting(   formula = ~1,   conflict = c(\"fixed\", \"region\"),   time = c(\"national\", \"region\") )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_reporting.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reporting model component specification ‚Äî vrc_reporting","text":"formula model formula. default ~ 1 specifies additional covariates. conflict model conflict effect reporting component. Use \"fixed\" one effect shared across regions (per cause), \"region\" partial pooling (random slopes) region (per cause). time model time variation reporting component. \"national\" uses single random walk shared across regions (per cause). \"region\" adds region-specific random walk deviations around national trend.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_reporting.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reporting model component specification ‚Äî vrc_reporting","text":"object class vrc_reporting.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_resolve_priors.html","id":null,"dir":"Reference","previous_headings":"","what":"Resolve priors into Stan hyperparameters ‚Äî vrc_resolve_priors","title":"Resolve priors into Stan hyperparameters ‚Äî vrc_resolve_priors","text":"Resolve priors Stan hyperparameters","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_resolve_priors.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Resolve priors into Stan hyperparameters ‚Äî vrc_resolve_priors","text":"","code":"vrc_resolve_priors(priors, G, K_mort, K_rep, X_mort, X_rep)"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_sim_truth.html","id":null,"dir":"Reference","previous_headings":"","what":"Extract cell-level truth from a simulated dataset ‚Äî vrc_sim_truth","title":"Extract cell-level truth from a simulated dataset ‚Äî vrc_sim_truth","text":"Helper benchmarking. Given object returned vrc_simulate(), return data.frame aligned sim$df_full containing cell-level true mortality rates, reporting completeness, true deaths.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_sim_truth.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Extract cell-level truth from a simulated dataset ‚Äî vrc_sim_truth","text":"","code":"vrc_sim_truth(sim)"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_sim_truth.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Extract cell-level truth from a simulated dataset ‚Äî vrc_sim_truth","text":"sim list returned vrc_simulate().","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_sim_truth.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Extract cell-level truth from a simulated dataset ‚Äî vrc_sim_truth","text":"data.frame additional columns: lambda_true latent mortality rate rho_true reporting completeness D_true true deaths cause group","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_simulate.html","id":null,"dir":"Reference","previous_headings":"","what":"Simulate VR mortality with conflict-driven reporting collapse ‚Äî vrc_simulate","title":"Simulate VR mortality with conflict-driven reporting collapse ‚Äî vrc_simulate","text":"Simulate long-format vital registration (VR) dataset latent mortality process explicit observation (reporting) process can collapse conflict start time. simulator generates: latent cause-specific mortality rates (region, time, age, sex), true deaths given population denominators, observed VR counts given cause- age-specific reporting completeness, optional misclassification trauma non-trauma, optional additional missingness mechanisms stress test inference.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_simulate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Simulate VR mortality with conflict-driven reporting collapse ‚Äî vrc_simulate","text":"","code":"vrc_simulate(   R = 5,   T = 120,   age_breaks = c(0, 5, 15, 25, 35, 45, 55, 65, Inf),   sexes = c(\"F\", \"M\"),   t0 = floor(T/2),   seed = 1,   missing = list(type = \"none\", block_intercept = -2.5, block_conflict_coef = 0.8,     block_facility_coef = -1, age_dropout_strength = 0, age_dropout_old_from = 6,     age_dropout_post_only = TRUE, mnar_strength = 0, missing_to_zero = FALSE),   pop_total_range = c(3e+05, 1200000),   pop_error_sd = 0.05,   displacement_post_sd = 0.02,   conflict_post_mean = 1,   conflict_post_sd = 0.6,   conflict_spike_prob = 0.08,   conflict_spike_mean = 2,   facility_pre_mean = 0.9,   facility_post_drop = 0.35,   facility_noise_sd = 0.08,   beta_conf_true = c(1, 0.2),   beta_conf_region_sd = c(0, 0),   beta_fac_mort_true = c(0, -0.1),   sigma_u_lambda_true = c(0.35, 0.25),   sigma_v_lambda_true = c(0.08, 0.05),   sigma_v_lambda_region_true = c(0, 0),   phi_true = c(30, 60),   rho0_true = c(0.7, 0.9),   kappa_post_true = c(0, -1),   gamma_conf_true = c(-0.1, -0.5),   gamma_conf_region_sd = c(0, 0),   gamma_fac_true = c(0.6, 0.8),   sigma_u_rho_true = c(0.4, 0.35),   sigma_v_rho_true = c(0.12, 0.08),   sigma_v_rho_region_true = c(0, 0),   age_penalty_non = NULL,   misclass = list(p_non_to_trauma = 0.04, p_trauma_to_non = 0.01) )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_simulate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Simulate VR mortality with conflict-driven reporting collapse ‚Äî vrc_simulate","text":"R Number regions. T Number time points (example, months). age_breaks Numeric vector age breakpoints. Defaults 8 age groups. sexes Character vector sex labels. t0 Integer time index conflict begins. seed Random seed. missing list controlling additional missingness mechanisms. See Details. pop_total_range Length-2 numeric vector giving range total region populations sample . pop_error_sd Numeric. Lognormal measurement error (standard deviation log scale) applied population denominator used inference. displacement_post_sd Numeric. Random-walk volatility controlling region population scaling conflict (approximates displacement). conflict_post_mean Numeric. Mean conflict covariate conflict start. conflict_post_sd Numeric. Standard deviation conflict covariate conflict start. conflict_spike_prob Numeric (0,1). Probability additional conflict spike given time point conflict start. conflict_spike_mean Numeric. Mean spike size (gamma-distributed). facility_pre_mean Numeric. Mean facility functioning score pre-conflict (bounded 0-1). facility_post_drop Numeric. Average drop facility functioning conflict start. facility_noise_sd Numeric. Noise SD used generating facility functioning. beta_conf_true Length-2 numeric vector. True effect conflict covariate log mortality rates trauma non-trauma. beta_conf_region_sd Length-2 numeric vector. Standard deviation region-level deviations conflict effect mortality model. beta_fac_mort_true Length-2 numeric vector. True effect facility functioning log mortality rates. sigma_u_lambda_true Length-2 numeric vector. True SD region random intercepts mortality model. sigma_v_lambda_true Length-2 numeric vector. True SD national RW1 time effects mortality model. sigma_v_lambda_region_true Length-2 numeric vector. True SD region-specific RW1 deviations around national time effect. phi_true Length-2 numeric vector. NB2 size (overdispersion) parameters trauma non-trauma deaths. rho0_true Length-2 numeric vector. Baseline (pre-conflict) reporting completeness trauma non-trauma. kappa_post_true Length-2 numeric vector. Post-conflict shift logit reporting scale trauma non-trauma. gamma_conf_true Length-2 numeric vector. True effect conflict reporting completeness (logit scale). gamma_conf_region_sd Length-2 numeric vector. Standard deviation region-level deviations conflict effect reporting model. gamma_fac_true Length-2 numeric vector. True effect facility functioning reporting completeness (logit scale). sigma_u_rho_true Length-2 numeric vector. True SD region random intercepts reporting model. sigma_v_rho_true Length-2 numeric vector. True SD national RW1 time effects reporting model. sigma_v_rho_region_true Length-2 numeric vector. True SD region-specific RW1 deviations around national reporting time effect. age_penalty_non Optional numeric vector length equal number age groups. provided, gives monotone age-selective reporting penalty non-trauma post-conflict. misclass list elements p_non_to_trauma p_trauma_to_non giving misclassification probabilities among recorded deaths.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_simulate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Simulate VR mortality with conflict-driven reporting collapse ‚Äî vrc_simulate","text":"list elements: df_full: full long-format dataset (may contain NA y). df_obs: subset rows observed y. truth: latent arrays parameters used simulation. meta: dimension metadata.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_simulate.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Simulate VR mortality with conflict-driven reporting collapse ‚Äî vrc_simulate","text":"missing argument allows additional missingness beyond reporting process. useful stress testing identifiability. Supported patterns: type = \"none\": additional missingness. type = \"block\": region-time block dropout. type = \"age_selective\": older-age dropout (typically non-trauma). type = \"mnar\": missing---random dropout driven true death burden. type = \"combined\": apply three. missing$missing_to_zero = TRUE, missing cells converted zeros (tests robustness bad pipelines). Otherwise missing values become NA.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_standata.html","id":null,"dir":"Reference","previous_headings":"","what":"Build Stan data for the VR reporting model ‚Äî vrc_standata","title":"Build Stan data for the VR reporting model ‚Äî vrc_standata","text":"Convert long-format VR dataset list structure expected Stan model shipped package. Stan model expects one row per cell: region x time x age x sex x cause. minimal required columns : region, time, age, sex, cause: identifiers y: observed VR counts (integer, can NA) exposure: person-time risk (numeric, > 0). exposure absent, pop used fallback. conflict: conflict intensity proxy (numeric) Additional covariates can included via mortality_covariates reporting_covariates.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_standata.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Build Stan data for the VR reporting model ‚Äî vrc_standata","text":"","code":"vrc_standata(   data,   t0,   mortality_covariates = NULL,   reporting_covariates = NULL,   mortality_conflict = c(\"fixed\", \"region\"),   reporting_conflict = c(\"fixed\", \"region\"),   mortality_time = c(\"national\", \"region\"),   reporting_time = c(\"national\", \"region\"),   standardise = TRUE,   scale_binary = FALSE,   drop_na_y = TRUE,   duplicates = c(\"error\", \"sum\"),   priors = NULL,   prior_PD = FALSE,   age_drop_cause = NULL )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_standata.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Build Stan data for the VR reporting model ‚Äî vrc_standata","text":"data data.frame VR long format. t0 Conflict start time. May integer index, value matches value data$time. mortality_covariates Optional formula specifying additional covariates mortality (log-rate) component, excluding conflict. reporting_covariates Optional formula specifying additional covariates reporting (logit-completeness) component, excluding conflict. mortality_conflict model conflict effect mortality component. Use \"fixed\" (default) one effect shared across regions, \"region\" partial pooling (random slopes) region. reporting_conflict model conflict effect reporting component. Use \"fixed\" (default) one effect shared across regions, \"region\" partial pooling (random slopes) region. mortality_time model time variation mortality component. \"national\" uses single random walk shared across regions; \"region\" adds region-specific random walk deviations around national trend. reporting_time model time variation reporting component. \"national\" uses single random walk shared across regions; \"region\" adds region-specific random walk deviations around national trend. standardise Logical. TRUE (recommended), standardise conflict covariate columns produced formulas. scale_binary Logical. TRUE, binary dummy columns model matrices also standardised. Defaults FALSE. drop_na_y Logical. TRUE (default), rows missing y removed. duplicates handle duplicate identifier rows. One \"error\" (default) \"sum\". priors Optional prior specification created vrc_priors(). NULL (default), uses vrc_priors() package defaults. prior_PD Logical. TRUE, Stan ignores likelihood samples prior. Useful prior predictive checks. age_drop_cause cause age reporting breakdown occur . Defaults NULL uses 2nd cause first one.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_standata.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Build Stan data for the VR reporting model ‚Äî vrc_standata","text":"list components: standata: list passed Stan df: processed data used fitting (subset drop_na_y) meta: dimension metadata level mappings scaling: scaling information conflict, X_mort, X_rep","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_validate_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Validate a VR long-format dataset ‚Äî vrc_validate_data","title":"Validate a VR long-format dataset ‚Äî vrc_validate_data","text":"Validate dataset follows vrcmort canonical VR long format. function intentionally opinionated: aims catch common failure modes early (duplicate cells, missing denominators, negative counts, pipelines missing values silently converted zeros). function modify data unless repair = TRUE.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_validate_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Validate a VR long-format dataset ‚Äî vrc_validate_data","text":"","code":"vrc_validate_data(   data,   id_cols = c(\"region\", \"time\", \"age\", \"sex\", \"cause\"),   y_col = \"y\",   exposure_col = NULL,   conflict_col = \"conflict\",   allow_na_y = TRUE,   duplicates = c(\"error\", \"warn\"),   check_missing_as_zero = TRUE,   repair = FALSE )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_validate_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Validate a VR long-format dataset ‚Äî vrc_validate_data","text":"data data.frame. id_cols Character vector identifier column names. Defaults c(\"region\",\"time\",\"age\",\"sex\",\"cause\"). y_col Name observed count column. Defaults \"y\". exposure_col Name exposure column. NULL (default), uses \"exposure\" present; otherwise uses \"pop\" present. conflict_col Name conflict intensity column. Defaults \"conflict\". allow_na_y Logical. TRUE (default), y may contain NA. duplicates handle duplicated identifier rows. One \"error\" (default) \"warn\". check_missing_as_zero Logical. TRUE (default), warns evidence missing rows may converted zeros. repair Logical. TRUE, creates exposure column pop exposure absent.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_validate_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Validate a VR long-format dataset ‚Äî vrc_validate_data","text":"Invisibly returns input data.frame. repair = TRUE exposure absent pop present, exposure column added.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_write_stan_template.html","id":null,"dir":"Reference","previous_headings":"","what":"Write a custom Stan template to a directory ‚Äî vrc_write_stan_template","title":"Write a custom Stan template to a directory ‚Äî vrc_write_stan_template","text":"Copy modular Stan model shipped package (including include files) user-specified directory. provides safe starting point custom model development. Users can edit copied Stan files fit passing path .stan file vrc_fit() via stan_model.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_write_stan_template.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Write a custom Stan template to a directory ‚Äî vrc_write_stan_template","text":"","code":"vrc_write_stan_template(path, model = \"vr_reporting_model\", overwrite = FALSE)"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_write_stan_template.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Write a custom Stan template to a directory ‚Äî vrc_write_stan_template","text":"path Output directory. model Name base Stan model file copy (default: \"vr_reporting_model\"). overwrite Logical. TRUE, existing files path overwritten.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrc_write_stan_template.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Write a custom Stan template to a directory ‚Äî vrc_write_stan_template","text":"Invisibly returns path copied base Stan file.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrcm.html","id":null,"dir":"Reference","previous_headings":"","what":"Fit a VR mortality + reporting model ‚Äî vrcm","title":"Fit a VR mortality + reporting model ‚Äî vrcm","text":"High-level wrapper around vrc_fit() modelled user experience packages like epidemia rstanarm. specify mortality component reporting component, vrcm() handles data preparation model fitting. fitted model separates: latent mortality process (lambda), reporting completeness process (rho). processes include conflict proxy default.","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrcm.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fit a VR mortality + reporting model ‚Äî vrcm","text":"","code":"vrcm(   mortality = vrc_mortality(~1),   reporting = vrc_reporting(~1),   data,   t0,   priors = NULL,   ... )"},{"path":"https://github.com/OJWatson/vrcmort/reference/vrcm.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fit a VR mortality + reporting model ‚Äî vrcm","text":"mortality vrc_mortality() specification, formula. reporting vrc_reporting() specification, formula. data data.frame canonical VR long format (see vrc_standata()). t0 Conflict start time (index value data$time). priors Optional prior specification created vrc_priors(). NULL (default), uses vrc_priors() package defaults. ... Passed vrc_fit().","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrcm.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fit a VR mortality + reporting model ‚Äî vrcm","text":"vrcfit object, (chains = 0) standata bundle returned vrc_standata().","code":""},{"path":"https://github.com/OJWatson/vrcmort/reference/vrcmort-package.html","id":null,"dir":"Reference","previous_headings":"","what":"vrcmort: Vital registration mortality models with reporting processes ‚Äî vrcmort-package","title":"vrcmort: Vital registration mortality models with reporting processes ‚Äî vrcmort-package","text":"vrcmort package provides tools fitting hierarchical Bayesian models cause-specific vital registration (VR) mortality counts VR reporting mechanism changes time (example, armed conflict). core model separates latent mortality process observation (reporting) process, allowing conflict increase true mortality observed non-trauma VR counts can decline reporting collapses. package also includes simulator multiple missingness mechanisms stress testing inference.","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-008","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.8","title":"vrcmort 0.0.8","text":"pkgdown website referencing completed Gihtub CI completed","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-007","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.7","title":"vrcmort 0.0.7","text":"Added support user-supplied Stan files via vrc_model_spec() vrc_write_stan_template(). Posterior extraction helpers now respect param_map generated quantity names can customised. Added basic CI configuration improved R CMD check hygiene (.Rbuildignore, global variable declarations). Minor test updates testthat edition 3.","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-006","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.6","title":"vrcmort 0.0.6","text":"Expanded documentation epidemia-style vignettes covering model introduction, mathematical description, implementation details, schematic, partial pooling, priors, -reporting age-selective reporting collapse. Added two step--step tutorial vignettes (data preparation individual records covariate exploration). Updated pkgdown configuration surface new articles.","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-005","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.5","title":"vrcmort 0.0.5","text":"Added lightweight prior specification system (vrc_priors()) inspired rstanarm/epidemia. Users can now override key priors (covariate coefficients, conflict effects, reporting anchors, random-effect scales, dispersion) via vrcm() / vrc_fit(). Stan model priors now parameterised Stan data (hyperparameters) rather hard-coded constants.","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-004","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.4","title":"vrcmort 0.0.4","text":"Added optional partial pooling conflict effects region (random slopes) mortality reporting components. Added optional region-specific time random walks (deviations around national trend) mortality reporting. Added helpers extract region-specific conflict effects fitted models. Fixed vrc_fit() pass duplicates vrc_standata().","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-003","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.3","title":"vrcmort 0.0.3","text":"Added epidemia-style high-level interface (vrcm) explicit mortality reporting components. Added convenience S3 methods vrcfit objects (plot, fitted, residuals, coef). Refactored shipped Stan model modular include files (‚ÄúStan lego bricks‚Äù) simplify extension.","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-002","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.2","title":"vrcmort 0.0.2","text":"Introduced canonical VR long format contract explicit exposure. Added data validation (vrc_validate_data) indexing (vrc_index). Added lightweight reporting diagnostics (vrc_diagnose_reporting). Updated Stan model plotting helpers use exposure (pop fallback).","code":""},{"path":"https://github.com/OJWatson/vrcmort/news/index.html","id":"vrcmort-001","dir":"Changelog","previous_headings":"","what":"vrcmort 0.0.1","title":"vrcmort 0.0.1","text":"Initial package skeleton. Base Stan model VR mortality explicit reporting process. Simulator multiple missingness mechanisms stress testing.","code":""}]
