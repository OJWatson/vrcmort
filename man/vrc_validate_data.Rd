% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/contract.R
\name{vrc_validate_data}
\alias{vrc_validate_data}
\title{Validate a VR long-format dataset}
\usage{
vrc_validate_data(
  data,
  id_cols = c("region", "time", "age", "sex", "cause"),
  y_col = "y",
  exposure_col = NULL,
  conflict_col = "conflict",
  allow_na_y = TRUE,
  duplicates = c("error", "warn"),
  check_missing_as_zero = TRUE,
  repair = FALSE
)
}
\arguments{
\item{data}{A data.frame.}

\item{id_cols}{Character vector of identifier column names.
Defaults to \code{c("region","time","age","sex","cause")}.}

\item{y_col}{Name of the observed count column. Defaults to \code{"y"}.}

\item{exposure_col}{Name of the exposure column. If \code{NULL} (default), uses
\code{"exposure"} if present; otherwise uses \code{"pop"} if present.}

\item{conflict_col}{Name of the conflict intensity column.
Defaults to \code{"conflict"}.}

\item{allow_na_y}{Logical. If TRUE (default), \code{y} may contain \code{NA}.}

\item{duplicates}{How to handle duplicated identifier rows.
One of \code{"error"} (default) or \code{"warn"}.}

\item{check_missing_as_zero}{Logical. If TRUE (default), warns when there is
evidence that missing rows may have been converted to zeros.}

\item{repair}{Logical. If TRUE, creates an \code{exposure} column from \code{pop} when
\code{exposure} is absent.}
}
\value{
Invisibly returns the input data.frame. If \code{repair = TRUE} and
\code{exposure} is absent but \code{pop} is present, an \code{exposure} column is added.
}
\description{
Validate that a dataset follows the \code{vrcmort} canonical VR long format.
This function is intentionally opinionated: it aims to catch common failure
modes early (duplicate cells, missing denominators, negative counts, and
pipelines where missing values are silently converted to zeros).

The function does not modify \code{data} unless \code{repair = TRUE}.
}
