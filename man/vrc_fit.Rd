% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fit.R
\name{vrc_fit}
\alias{vrc_fit}
\title{Fit the VR reporting model}
\usage{
vrc_fit(
  data,
  t0,
  mortality_covariates = NULL,
  reporting_covariates = NULL,
  mortality_conflict = c("fixed", "region"),
  reporting_conflict = c("fixed", "region"),
  mortality_time = c("national", "region"),
  reporting_time = c("national", "region"),
  standardise = TRUE,
  scale_binary = FALSE,
  drop_na_y = TRUE,
  duplicates = c("error", "sum"),
  algorithm = c("sampling", "meanfield", "fullrank"),
  priors = NULL,
  prior_PD = FALSE,
  backend = c("rstan"),
  stan_model = "vr_reporting_model",
  ...
)
}
\arguments{
\item{data}{A data.frame in long format (see \code{\link[=vrc_standata]{vrc_standata()}}).}

\item{t0}{Conflict start time. See \code{\link[=vrc_standata]{vrc_standata()}}.}

\item{mortality_covariates}{Optional formula for additional mortality covariates, excluding \code{conflict}.}

\item{reporting_covariates}{Optional formula for additional reporting covariates, excluding \code{conflict}.}

\item{mortality_conflict}{How to model the conflict effect in the mortality component.
Use \code{"fixed"} (default) for one effect shared across regions, or \code{"region"}
for partial pooling (random slopes) by region.}

\item{reporting_conflict}{How to model the conflict effect in the reporting component.
Use \code{"fixed"} (default) for one effect shared across regions, or \code{"region"}
for partial pooling (random slopes) by region.}

\item{mortality_time}{How to model time variation in the mortality component.
\code{"national"} uses a single random walk shared across regions; \code{"region"} adds
region-specific random walk deviations around the national trend.}

\item{reporting_time}{How to model time variation in the reporting component.
\code{"national"} uses a single random walk shared across regions; \code{"region"} adds
region-specific random walk deviations around the national trend.}

\item{standardise}{Logical. If TRUE (recommended), standardise \code{conflict} and
covariate columns in model matrices.}

\item{scale_binary}{Logical. If TRUE, also standardise binary dummy columns.}

\item{drop_na_y}{Logical. If TRUE, rows with missing \code{y} are removed before
fitting.}

\item{duplicates}{How to handle duplicate identifier rows. One of
\code{"error"} (default) or \code{"sum"}.}

\item{algorithm}{One of \code{"sampling"}, \code{"meanfield"}, or \code{"fullrank"} (passed to \code{rstan}).}

\item{priors}{Optional prior specification created by \code{\link[=vrc_priors]{vrc_priors()}}. If
\code{NULL} (default), uses \code{\link[=vrc_priors]{vrc_priors()}} with package defaults.}

\item{prior_PD}{Logical. If TRUE, samples from the prior distribution (no likelihood).}

\item{backend}{Backend to use. Currently only \code{"rstan"} is supported.}

\item{stan_model}{Stan model name. Defaults to \code{"vr_reporting_model"}.}

\item{...}{Additional arguments passed to \code{rstan::sampling} or \code{rstan::vb}.}
}
\value{
An object of class \code{vrcfit}.
}
\description{
Fit the hierarchical VR mortality model with an explicit reporting process.
The model is implemented in Stan and is fit using \code{rstan}.
}
